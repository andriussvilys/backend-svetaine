(this.webpackJsonpinterface=this.webpackJsonpinterface||[]).push([[0],{124:function(e,t,a){e.exports=a(236)},150:function(e,t,a){},175:function(e,t){},234:function(e,t,a){},236:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(25),r=a.n(l),i=a(8),c=a(9),s=a(11),u=a(10),m=a(19),f=a(33),d=a(122),g=new(function(){function e(){Object(i.a)(this,e),this.authenticated=!1,this.guest=!1}return Object(c.a)(e,[{key:"login",value:function(e,t){t&&t.guest?this.guest=!0:this.guest=!1,this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!1,this.guest=null,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),y=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return o.a.createElement(f.b,Object.assign({},a,{render:function(e){return g.isAuthenticated()?o.a.createElement(t,e):o.a.createElement(f.a,{to:{pathname:"/admin/login",state:{from:e.location}}})}}))},p=a(1),h=a(5),b=a(3),v=a(7),O=a.n(v),k=o.a.createContext(),E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n.enlarge={},n.categoryChecked=function(e){var t=!1;return Object.keys(n.state.artworkOnDisplay).forEach((function(a){var o=n.state.artworkOnDisplay[a];Object.keys(o.category).includes(e)&&(t=!0)})),t},n.filterByCategory=function(e,t,a){return e.stopPropagation(),new Promise((function(e,o){var l={},r={};if(a)return Object.keys(n.state.visibleArtwork).forEach((function(e){var a=n.state.visibleArtwork[e];if(a.category[t])return l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,a));r=Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e,a))})),n.setState({artworkOnDisplay:l},(function(){e("filter by category complete")}));n.categoryChecked(t)?(Object.keys(n.state.artworkOnDisplay).forEach((function(e){var a=n.state.artworkOnDisplay[e];Object.keys(a.category).includes(t)?r=Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e,a)):l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,a))})),Object.keys(r).forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:l},(function(){e(150)}))}),200)):(l=Object(p.a)({},n.state.artworkOnDisplay),Object.keys(n.state.artworkInfoData).forEach((function(e){var a=n.state.artworkInfoData[e];a.displayTriggers.category.includes(t)&&(l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,a)))})),Object.keys(l).forEach((function(e){document.getElementById(e).classList.remove("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:l},(function(){e(150)}))}),200))}))},n.filterBySubcategory=function(e,t,a,o){return console.log(e.target),e.stopPropagation(),new Promise((function(e,l){var r={},i={};if(o)return Object.keys(n.state.visibleArtwork).forEach((function(e){var o=n.state.visibleArtwork[e];if(o.category[t]&&o.category[t][a])return r=Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e,o));i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,o))})),n.setState({artworkOnDisplay:r},(function(){return e("filtered by subcategory")}));n.subcategoryChecked(t,a)?(Object.keys(n.state.artworkOnDisplay).forEach((function(e){var o=n.state.artworkOnDisplay[e];return o.category[t]&&Object.keys(o.category[t]).includes(a)?void(i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,o))):r=Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e,o))})),Object.keys(i).forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:r})}),200)):(r=Object(p.a)({},n.state.artworkOnDisplay),Object.keys(n.state.artworkInfoData).forEach((function(e){var t=n.state.artworkInfoData[e];t.displayTriggers.subcategory.includes(a)&&(r=Object(p.a)(Object(p.a)({},r),{},Object(b.a)({},e,t)))})),Object.keys(r).forEach((function(e){document.getElementById(e).classList.remove("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:r})}),200))}))},n.subcategoryChecked=function(e,t){var a=!1;return Object.keys(n.state.artworkOnDisplay).forEach((function(o){var l=n.state.artworkOnDisplay[o];l.category[e]&&Object.keys(l.category[e]).includes(t)&&(a=!0)})),a},n.listitemChecked=function(e,t,a){var o=!1;return Object.keys(n.state.artworkOnDisplay).forEach((function(l){var r=n.state.artworkOnDisplay[l];if(r.category[e]&&r.category[e][t]&&r.category[e][t].includes(a))return o=!0})),o},n.filterByListitem=function(e,t,a,o,l){return e.stopPropagation(),new Promise((function(e,r){var i={},c={};if(l)return Object.keys(n.state.visibleArtwork).forEach((function(e){var l=n.state.visibleArtwork[e];if(l.category[t]&&l.category[t][a]){if(l.category[t][a].includes(o))return i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,l));c=Object(p.a)(Object(p.a)({},c),{},Object(b.a)({},e,l))}else c=Object(p.a)(Object(p.a)({},c),{},Object(b.a)({},e,l))})),n.setState({artworkOnDisplay:i},(function(){e("fitlered by listitem")}));n.listitemChecked(t,a,o)?(Object.keys(n.state.artworkOnDisplay).forEach((function(e){var l=n.state.artworkOnDisplay[e];l.category[t]&&l.category[t][a]&&l.category[t][a].includes(o)?c=Object(p.a)(Object(p.a)({},c),{},Object(b.a)({},e,l)):i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,l))})),Object.keys(c).forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:i})}),200)):(i=Object(p.a)({},n.state.artworkOnDisplay),Object.keys(n.state.artworkInfoData).forEach((function(e){var t=n.state.artworkInfoData[e];t.displayTriggers.listitems.includes(o)&&(i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,t)))})),Object.keys(i).forEach((function(e){document.getElementById(e).classList.remove("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:i})}),200))}))},n.filterByTheme=function(e,t,a){return e.stopPropagation(),new Promise((function(e,o){var l=Object(p.a)({},n.state),r=Object(h.a)(l.themesOnDisplay[t]),i=Object(p.a)({},l.artworkOnDisplay),c=[];if(Object.keys(i).forEach((function(e){c=i[e].themes.map((function(e){return e}))}),(function(){return c=Array.from(new Set(c))})),a){console.log("on theme check");var s=n.state.artworkInfoData,u=Object.keys(n.state.artworkInfoData),m={};return u.forEach((function(e){s[e].displayTriggers.themes&&s[e].displayTriggers.themes.includes(t)&&(m=Object(p.a)(Object(p.a)({},m),{},Object(b.a)({},e,n.state.artworkInfoData[e])))})),n.setState({artworkOnDisplay:m},(function(){u.forEach((function(e){var t=document.getElementById(e);t.src||(t.src=t.getAttribute("data-src")),t.classList.remove("image-hide")})),e("filter complete")}))}if(n.themeChecked(t))return console.log("on theme uncheck"),r.forEach((function(e){document.getElementById(e).classList.add("image-hide")})),r.forEach((function(e){delete i[e]})),n.setState({artworkOnDisplay:i},(function(){return e("filter by theme complete")}));console.log("on theme check");var f=n.state.artworkInfoData,d=Object.keys(n.state.artworkInfoData);return d.forEach((function(e){f[e].displayTriggers.themes&&f[e].displayTriggers.themes.includes(t)&&(i=Object(p.a)(Object(p.a)({},i),{},Object(b.a)({},e,n.state.artworkInfoData[e])))})),n.setState({artworkOnDisplay:i},(function(){d.forEach((function(e){var t=document.getElementById(e);t.src||(t.src=t.getAttribute("data-src")),t.classList.remove("image-hide")})),e("filter complete")}))}))},n.filterAllThemes=function(e){var t=[];if(Object.keys(n.state.artworkOnDisplay).forEach((function(e){var a=n.state.artworkOnDisplay[e];t=[].concat(Object(h.a)(t),Object(h.a)(a.themes))})),t=Array.from(new Set(t)),!e)return Object.keys(n.state.artworkInfoData).forEach((function(e){document.getElementById(e).classList.remove("image-hide"),document.getElementById(e).classList.remove("FilePreview--imageContainer__empty"),document.getElementById(e).src=document.getElementById(e).getAttribute("data-src")})),n.setState({artworkOnDisplay:Object(p.a)({},n.state.visibleArtwork)});Object.keys(n.state.artworkOnDisplay).forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return n.setState({artworkOnDisplay:{}})}),200)},n.filterByYear=function(e){var t=Object(p.a)({},n.state),a=Object(h.a)(t.yearLocation.all.years[e]),o=Object(p.a)({},t.artworkOnDisplay);if(!n.yearChecked(e)){var l=n.state.artworkInfoData;return Object.keys(n.state.artworkInfoData).forEach((function(t){l[t].displayTriggers.year&&(l[t].displayTriggers.year.includes(e)&&(o=Object(p.a)(Object(p.a)({},o),{},Object(b.a)({},t,l[t])),document.getElementById(t).classList.remove("image-hide")))})),n.setState({artworkOnDisplay:o})}a.forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return a.forEach((function(e){delete o[e]})),n.setState({artworkOnDisplay:o,yearLocation:Object(p.a)(Object(p.a)({},t.yearLocation),{},{visible:Object(p.a)(Object(p.a)({},t.yearLocation.visible),{},{years:Object(p.a)(Object(p.a)({},t.yearLocation.visible.years),{},Object(b.a)({},e,[]))})})})}),400)},n.yearChecked=function(e){var t=Object(p.a)({},n.state.artworkOnDisplay);return Object.keys(t).filter((function(a){return t[a].year===e})).length>0},n.themeChecked=function(e){var t=Object(p.a)({},n.state.artworkOnDisplay);return Object.keys(t).filter((function(a){if(t[a].displayTriggers.themes)return!0===t[a].displayTriggers.themes.includes(e)})).length>0},n.filterByLocation=function(e){var t=Object(p.a)({},n.state),a=Object(h.a)(t.yearLocation.all.locations[e]),o=Object(p.a)({},t.artworkOnDisplay);if(!n.locationChecked(e)){var l=n.state.artworkInfoData;return Object.keys(n.state.artworkInfoData).forEach((function(t){l[t].displayTriggers.location&&(l[t].displayTriggers.location.includes(e)&&(o=Object(p.a)(Object(p.a)({},o),{},Object(b.a)({},t,l[t])),document.getElementById(t).classList.remove("image-hide")))})),n.setState({artworkOnDisplay:o})}a.forEach((function(e){document.getElementById(e).classList.add("image-hide")})),setTimeout((function(){return a.forEach((function(e){delete o[e]})),n.setState({artworkOnDisplay:o,yearLocation:Object(p.a)(Object(p.a)({},t.yearLocation),{},{visible:Object(p.a)(Object(p.a)({},t.yearLocation.visible),{},{locations:Object(p.a)(Object(p.a)({},t.yearLocation.visible.locations),{},Object(b.a)({},e,[]))})})})}),400)},n.locationChecked=function(e){var t=Object(p.a)({},n.state.artworkOnDisplay);return Object.keys(t).filter((function(a){return t[a].location===e})).length>0},n.showMenu=function(e){if(e&&e.stopPropagation(),console.log("run show menu"),n.state.mobile){console.log("show menu MOBILE");var t=1;return document.getElementById("ArtworkInfo")&&document.getElementById("ArtworkInfo").classList.contains("info-up")&&(document.getElementById("ArtworkInfo").classList.remove("info-up"),t+=100),document.getElementById("TagsMenu").classList.contains("show-menu")?(console.log("menu is open"),document.getElementsByClassName("scroll-down-listitem").length>0&&(document.getElementsByClassName("scroll-down-listitem")[0].classList.remove("scroll-down-listitem"),t+=100),setTimeout((function(){document.getElementsByClassName("scroll-down").length>0&&(document.getElementsByClassName("scroll-down")[0].classList.remove("scroll-down"),t+=50),setTimeout((function(){document.getElementById("TagsMenu").classList.remove("show-menu")}),t)}),t)):(console.log("menu is close"),document.getElementById("TagsMenu").classList.add("show-menu"))}if(console.log("show menu desktop"),n.state.enlarge&&n.state.enlarge.open){if(document.getElementById("TagsMenu").classList.contains("show-menu-desktop"))return void(n.state.enlarge&&n.state.enlarge.open?(document.getElementById("TagsMenu").classList.remove("show-menu-desktop"),n.animateEnlarge(n.state.enlarge.background)):(document.getElementById("TagsMenu").classList.remove("show-menu-desktop"),document.getElementById("imageSelect").style.width="100%"));n.state.enlarge.open?(document.getElementById("imageSelect").style.width="auto",document.getElementById("TagsMenu").classList.add("show-menu-desktop"),n.animateEnlarge(n.state.enlarge.background)):document.getElementById("imageSelect").style.width="100%"}else document.getElementById("TagsMenu").classList.toggle("show-menu-desktop")},n.hideArtworkInfo=function(e){e&&e.stopPropagation();var t=document.getElementById("ArtworkInfo");return t&&t.classList.contains("info-up")?200:1},n.closeEnlarge=function(e,t){e&&e.stopPropagation();var a=document.getElementById("ArtworkInfo");if(!a||!a.classList.contains("info-up")||(a.classList.remove("info-up"),a&&a.classList.remove("show"),t))if(t||!document.getElementById("TagsMenu").classList.contains("show-menu")){var o=n.hideArtworkInfo();setTimeout((function(){var e=document.getElementById("enlargeContainer");if(n.state.mobile?(document.getElementById("imageSelect").classList.remove("side-scroll"),setTimeout((function(){e.classList.remove("enlarge-scroll-down"),a&&a.classList.remove("show")}),400)):(document.getElementById("imageSelect").style.width="100%",setTimeout((function(){e.classList.remove("enlarge-scroll-left")}),200)),!t){var o=Object(p.a)({},n.state.enlarge);o.open=!1,n.setState({enlarge:o})}}),o)}else n.showMenu(e)},n.viewNext=function(e){if(console.log("__________________________"),console.log("view next"),n.state.enlarge){var t=n.state.enlarge.background,a=n.createFamilySequence(t),o=a.state.enlarge.familySequence.familyName,l=a.state.enlarge.familySequence.familySequence,r=a.state.enlarge.familySequence.familyIndex,i=a.state.enlarge.familySequence.commonSequence,c=a.state.enlarge.familySequence.commonIndex,s=null,u=null;!function(){if(e>0)if(r+1>l.length-1){var t=n.state.artworkOnDisplay,m=i.find((function(e){if(t[e].artworkFamily!==o&&i.indexOf(e)>c)return i.indexOf(e)}));m||(m=i[0]);var f=n.state.artworkInfoData[m];console.log("nextPicName"),console.log(m),a=n.createFamilySequence(f),s=i,u=i.indexOf(m)}else u=r+1,a.state.enlarge.familySequence.familyIndex+=1,s=a.state.enlarge.familySequence.familySequence;else if(r-1<0){var d=null;n.state.artworkOnDisplay;d=0===c?i[i.length-1]:i[c-1],console.log(d),console.log("prevPicName");var g=n.state.artworkInfoData[d],y=(n.state.relatedArtwork[g.artworkFamily].column.fileIds,n.state.artworkInfoData[d]);a=n.createFamilySequence(y),s=a.state.enlarge.familySequence.familySequence,u=s.indexOf(y.fileName),a.reverse=!0}else u=r-1,a.state.enlarge.familySequence.familyIndex-=1,s=a.state.enlarge.familySequence.familySequence,a.reverse=!0}();var m=s[u];console.log("sequence"),console.log(s),console.log("nextIndex"),console.log(u);var f=n.state.artworkInfoData[m];a.state.enlarge.familySequence.commonSequence.includes(m)||(console.log("will not scroll"),a.scroll=!1),n.animateEnlarge(f,a)}},n.countWidth=function(e,t,a,n,o){console.log("countWidth");var l=document.getElementById("TagsMenu").offsetWidth,r=document.querySelector(".Navbar")?document.querySelector(".Navbar").offsetWidth:0;console.log("tagsMenuWidth"),console.log(l),console.log("imageNavWidth"),console.log(r),o&&o.tagsMenuClosed&&(l=0);var i=document.getElementById("images").parentNode.offsetWidth-l-r-120,c=a/t;if(n){i=document.getElementById("images").clientWidth;var s=document.getElementById("images").clientHeight-70,u=i,m=Math.round(u/c);return m>s&&(m=s,u=Math.round(m*c)),{width:u,height:m}}var f=t/e,d=Math.round(a/f),g=Math.round(d/c)-50;return d>i&&(d=i,g=Math.round(i/c)),{width:d,height:g=g>e?e:g}},n.animateEnlarge=function(e,t){n.enlarge.loaded=!1;var a=null;document.getElementById("TagsMenu").classList.contains("show-menu")&&document.getElementById("TagsMenu").classList.remove("show-menu");var o=document.getElementById("background"),l=document.getElementById("foreground"),r=document.getElementById("enlargeContainer"),i=document.getElementById("imageSelect"),c=document.getElementById("images"),s=n.state.enlarge?Object(p.a)({},n.state.enlarge):t.state.enlarge;s.previous=s.background?s.background:e,s.background=e;var u=null,m=null;n.state.mobile?(u=e.thumbnailPath,m=e.mobilePath):(u=e.mobilePath,m=e.desktopPath),new Promise((function(e,t){n.enlarge.loaded?t("alraedy laoded"):(document.querySelector("#background-img").src=u,document.querySelector("#background-img").addEventListener("load",(function(){n.enlarge.loaded=!0,e("background loaded")})))})).then((function(u){var f=null;n.state.mobile?(f=n.countWidth(r.clientWidth,e.naturalSize.naturalHeight,e.naturalSize.naturalWidth,!0),o.style.height="".concat(f.height,"px"),l.style.height="".concat(f.height,"px"),o.style.width="".concat(f.width,"px"),l.style.width="".concat(f.width,"px")):f=n.countWidth(r.clientHeight,e.naturalSize.naturalHeight,e.naturalSize.naturalWidth);var d=t&&t.state?t.state:Object(p.a)({},n.state);d.enlarge=s,l.classList.add("fade-out");var g=0;if(n.state.mobile)r.classList.contains("enlarge-scroll-down")||(r.style.height="".concat(c.clientHeight-90,"px"),r.classList.add("enlarge-scroll-down"),g=400,setTimeout((function(){i.classList.add("side-scroll")}),200));else{if(r.classList.contains("enlarge-scroll-left"))if(n.state.enlarge.currentWidth&&n.state.enlarge.currentWidth>f.width&&n.state.enlarge.open)console.log("enlargeContainer will shrink"),i.style.width="".concat(c.clientWidth-f.width,"px"),setTimeout((function(){r.style.width="".concat(f.width,"px")}),400);else{console.log("enlargeContainer will GROW");var y=f.width/r.offsetWidth;console.log("mmentum");var h=300*y;h=h.toFixed(3),console.log(h),r.style.width="".concat(f.width,"px"),setTimeout((function(){i.style.width="".concat(c.clientWidth-f.width,"px")}),h)}else r.classList.add("enlarge-scroll-left"),r.style.width="".concat(f.width,"px"),setTimeout((function(){i.style.width="".concat(c.clientWidth-f.width,"px")}),600);document.querySelector(".pinch-to-zoom-area").style.height="".concat(f.height,"px")}if(t){var b=t.state.enlarge.familySequence,v=n.state.artworkOnDisplay,O=null;v[e.fileName]?O=e.fileName:(O=Object.keys(v).find((function(t){if(v[t].artworkFamily===e.artworkFamily&&b.commonSequence.indexOf(t)>b.commonIndex)return t})))||(O=b.commonSequence[b.commonIndex]),setTimeout((function(){n.scrollToHorizontal(O,"imageSelect")}),g)}d.enlarge.foreground=s.background,d.enlarge.currentWidth=f.width,d.enlarge.currentHeight=c.clientHeight-90,d.enlarge.open=!0,n.setState(d);setTimeout((function(){(console.log("loadForeground"),new Promise((function(e,t){document.querySelector("#foreground-img").src=m,document.querySelector("#foreground-img").addEventListener("load",(function(){a?t(a):(l.classList.remove("fade-out"),n.enlarge.loaded=!1,a=!0,e("finished"))}))}))).then((function(e){document.getElementById("ArtworkInfo").classList.add("show")})).catch((function(e){console.log("enlarge.fgLoaded"),console.log(e)})),n.scrollToHorizontal("previewBubble-".concat(e.fileName),"previewBubble-wrapper",{increment:50})}),200)})).catch((function(e){console.log(e)}))},n.scrollToHorizontal=function(e,t,a){var o={behavior:"smooth"};if(document.getElementById(t)){if(!e)return o.left=0,void document.getElementById(t).scrollTo(o);var l=document.getElementById(t).scrollLeft>0?200:800;n.state.mobile&&setTimeout((function(){if(document.getElementById(e)){var n=a&&a.increment?a.increment:5;o.left=document.getElementById(e).getBoundingClientRect().x-n,document.getElementById(t).scrollLeft>0&&(o.left+=document.getElementById(t).scrollLeft),console.log("scrollTo.left"),console.log(o.left),document.getElementById(t).scrollTo(o)}}),l)}else console.log("".concat(t," was not found"))},n.createFamilySequence=function(e){var t={state:null,scroll:null},a={},o=Array.from(document.querySelectorAll(".FilePreview--imageContainer:not(.FilePreview--imageContainer__empty)")).map((function(e){return e.childNodes[0].id})),l=Object(p.a)({},n.state),r=e.artworkFamily,i=e.fileName,c=n.state.enlarge?o.indexOf(i)<0?n.state.enlarge.familySequence.commonIndex:o.indexOf(i):0;if(n.state.enlarge&&n.state.enlarge.familySequence.familyName===r){var s=n.state.enlarge.familySequence,u=s.familySequence.indexOf(i);a={familyName:r,familySequence:s.familySequence,familyIndex:u,commonSequence:s.commonSequence,commonIndex:c}}else{var m=n.state.relatedArtwork[r].column.fileIds;n.state.relatedArtwork[r].column.fileIds.indexOf(i);a={familyName:r,familySequence:m,familyIndex:0,commonSequence:o,commonIndex:c}}return l.enlarge||(l.enlarge={}),l.enlarge.familySequence=a,t.state=l,t.scroll=!(o.indexOf(i)<0),t},n.loadEnlarge=function(e,t){console.log("load enlarge"),e.stopPropagation();var a=n.state.artworkInfoData[t],o=n.createFamilySequence(a);return n.animateEnlarge(a,o)},n.showInfo=function(e){if(!n.state.enlarge||n.state.enlarge.open){console.log("run show info");var t=document.getElementById("ArtworkInfo");if(n.state.mobile||t.classList.contains("info-up")){if(!t.classList.contains("show")){var a=1;n.state.mobile&&document.getElementById("TagsMenu").classList.contains("show-menu")&&(n.showMenu(e),a=1),setTimeout((function(){setTimeout((function(){t.classList.add("info-up")}),100),t.classList.add("show")}),a)}}else t.classList.contains("info-up")?t.classList.remove("info-up"):t.classList.add("info-up")}},n.toggleMobile=function(){var e=document.getElementById("enlargeContainer"),t=document.getElementById("images"),a=(document.getElementById("imageSelect"),null);if(document.documentElement.clientWidth<721?(a=!0,e.style.height="".concat(t.clientHeight-90,"px"),document.getElementById("foreground").style.height="auto",document.getElementById("background").style.height="auto"):(console.log("width/height 100%"),document.getElementById("background").style.width="100%",document.getElementById("foreground").style.width="100%",document.getElementById("background").style.height="100%",document.getElementById("foreground").style.height="100%",a=!1),n.state.enlarge&&n.state.enlarge.open){var o=Object(p.a)({},n.state);o.mobile=a,n.animateEnlarge(n.state.enlarge.background,{state:o})}return a},n.onTouchStart=function(e){var t=e.touches,a={x:t[0].clientX,y:t[0].clientY};n.setState({touch:a})},n.lazyLoadImages=function(){var e=document.querySelectorAll(".imageSelect-FilePreview"),t={threshold:0,margin:"0px 0px 300px 0px"},a=new IntersectionObserver((function(e,a){e.forEach((function(e){e.isIntersecting&&(!function(e){var t=e.getAttribute("data-src");t&&(e.src=t)}(e.target),a.unobserve(e.target))}),t)}));e.forEach((function(e){a.observe(e)}))},n.getArtworkInfo=function(){return new Promise((function(e,t){var a=null;O.a.get("/fetchImages").then((function(t){a=t.data;var n=t.data.map((function(e){var t=e.substring(0,e.indexOf("-thumbnail")),a=e.substring(e.indexOf("-thumbnail")+"-thumbnail".length);return"".concat(t).concat(a)}));a=n,O.a.get("/api/artworkInfo").then((function(t){var n={},o=[];a.forEach((function(e){t.data.forEach((function(t){t.fileName!==e||o.includes[e]||(o=[].concat(Object(h.a)(o),[e]),(n=Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e,t)))[e].useFamilySetup=!1)}))})),e(n)})).catch((function(e){console.log("getArtworkInfo err"),console.log(e)}))})).catch((function(e){console.log("fetch images err"),console.log(e)}))}))},n.getRelatedArtwork=function(e,t){var a={};return new Promise((function(t,n){O.a.get("/api/artworkInfo/".concat(e)).then((function(n){n.data.forEach((function(e,t){Object.keys(e).forEach((function(t){a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.fileName,Object(p.a)(Object(p.a)({},a[e.fileName]),{},Object(b.a)({},t,e[t]))))}))}));var o=Object.keys(a).map((function(e){return null}));Object.keys(a).forEach((function(e){a[e].familyDisplayIndex<0?o.push(e):o[a[e].familyDisplayIndex]=e})),o=o.filter((function(e){return null!==e||!1}));var l={files:a,column:{fileIds:o,id:"".concat(e,"-relatedArtworks")},columnOrder:["".concat(e,"-relatedArtworks")]};t(l)}))}))},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("/staticState").then((function(t){window.addEventListener("resize",(function(){e.setState({mobile:e.toggleMobile()})}));var a=t.data;a.mobile=e.toggleMobile(),e.setState(a)})).catch((function(e){console.log("COMPONENT DID MOUNT ERR"),console.log(e)}))}},{key:"render",value:function(){return o.a.createElement(k.Provider,{value:{state:this.state,filterByCategory:this.filterByCategory,filterBySubcategory:this.filterBySubcategory,filterByListitem:this.filterByListitem,categoryChecked:this.categoryChecked,subcategoryChecked:this.subcategoryChecked,listitemChecked:this.listitemChecked,enlarge:this.enlarge,loadEnlarge:this.loadEnlarge,closeEnlarge:this.closeEnlarge,hideArtworkInfo:this.hideArtworkInfo,viewNext:this.viewNext,viewPrev:this.viewPrev,showInfo:this.showInfo,filterAllThemes:this.filterAllThemes,filterByTheme:this.filterByTheme,themeChecked:this.themeChecked,filterByYear:this.filterByYear,yearChecked:this.yearChecked,filterByLocation:this.filterByLocation,locationChecked:this.locationChecked,showMenu:this.showMenu,toggleMobile:this.toggleMobile,onTouchStart:this.onTouchStart,lazyLoadImages:this.lazyLoadImages,scrollToHorizontal:this.scrollToHorizontal,readImageDir:this.readImageDir,changeFileName:this.changeFileName,onChange:this.onChange,addNew:this.addNew}},this.props.children)}}]),a}(o.a.Component),w=function(e){return o.a.createElement("label",{className:"styledCheckbox-container ".concat(e.className)},o.a.createElement("input",{id:e.id,className:"styledCheckbox-checkbox",type:"checkbox",onChange:e.onChange,checked:e.isChecked}),o.a.createElement("span",{className:"styleCheckbox-checkmark"}))},j=function(e){var t,a;return o.a.createElement("div",{key:"TagsMenu-category-".concat(e.category),className:e.isChecked?"TagsMenu-Accordion-label checkbox-selected":"TagsMenu-Accordion-label",onClick:e.onChange},o.a.createElement("div",{onClick:function(){e.showContent(e.category)},className:"TagsMenu-category-title ".concat(e.clickable?"":"no-click"," ").concat(e.titleModifier?e.titleModifier:"")},(t=e.category,a=e.level,Array.from(t).map((function(e,n){return o.a.createElement("div",{key:"".concat(t,"-leter-").concat(n),className:"title-letter ".concat(a,"-title-letter")},e)})))),e.button?null:o.a.createElement(w,{id:"".concat(e.level,"-").concat(e.category),onChange:e.onChange,isChecked:e.isChecked,className:"category"===e.level?"styledCheckbox-container_large":"styledCheckbox-container_small"}))},D=function(e){var t=e.years.map((function(t,a){return o.a.createElement("li",{key:"li-".concat(t,"-").concat(a),className:"tags-li"},o.a.createElement(j,{key:t,category:t,level:"year",onChange:function(){return e.context.filterByYear(t)},isChecked:e.context.yearChecked(t),showContent:function(){},modifierClass:"year-tag"}))}));return o.a.createElement(n.Fragment,null,o.a.createElement("ul",{className:"tagsMenu-list tagsMenu-list-tags"},t))},N=function(e){var t=e.locations.map((function(t,a){return o.a.createElement("li",{key:"li-".concat(t,"-").concat(a),style:{flex:"1 1 100%",listStyle:"none"}},o.a.createElement(j,{key:t,category:t,level:"location",onChange:function(){return e.context.filterByLocation(t)},isChecked:e.context.locationChecked(t),showContent:function(){},modifierClass:"location-tag"}))}));return o.a.createElement(n.Fragment,null,o.a.createElement("ul",{className:"tagsMenu-list tagsMenu-list-tags"},t))},x=function(e){return e.state.themesOnDisplay?function(){var t=Object.keys(e.state.themesOnDisplay).filter((function(t){return e.state.themesOnDisplay[t].length>0})).sort().map((function(t){return o.a.createElement("li",{key:t,className:"tags-li"},o.a.createElement(j,{key:t,category:t,level:"theme",onChange:function(){return e.context.filterByTheme(t)},isChecked:e.context.themeChecked(t),showContent:function(){},titleModifier:"nowrap"}))}));return o.a.createElement("ul",{className:"tagsMenu-list tagsMenu-list-tags"},t)}():null},S=function(e){var t,a=e.context.state.artworkOnDisplay&&Object.keys(e.context.state.artworkOnDisplay).length>0;return o.a.createElement("div",{onClick:function(t){!function(t,a){e.context.filterAllThemes(t),e.context.closeEnlarge(a,!0)}(a,t)},className:"TagsMenu-Accordion-label category dark-bg"},o.a.createElement("div",{className:"TagsMenu-category-title"},(t=e.context.state.artworkOnDisplay&&Object.keys(e.context.state.artworkOnDisplay).length>0?"clear all":"view all",Array.from(t).map((function(e,a){return o.a.createElement("div",{key:"".concat(t,"-leter-").concat(a),className:"title-letter white-font"},e)})))))},I=function(e){return o.a.createElement("div",{onClick:function(t){e.loadEnlarge(t,"portrait.jpg"),setTimeout((function(){document.getElementById("ArtworkInfo")&&(document.getElementById("ArtworkInfo").classList.add("show"),setTimeout((function(){document.getElementById("ArtworkInfo").classList.add("info-up")}),200))}),600)}},o.a.createElement(j,{clickable:!0,category:"about",level:"category",button:!0,showContent:function(){}}))},C=(a(150),o.a.Component,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).fileContainer=function(t,a){var n=function(){return a.filePath?e.props.mobile?a.thumbnailPath:a.mobilePath:a.preview};return t.match("image")?o.a.createElement("img",{loadbydefault:e.props.loadbydefault,className:e.props.className,alt:a.artworkDescription||a.familyDescription||a.artworkName||a.fileName,"data-src":n(),src:e.props.loadbydefault?n():"",id:e.props.id||e.props.file.fileName,name:e.props.previewName,onClick:function(t){e.props.onClick(t)},ref:e.props.ref}):t.match("video")?o.a.createElement("video",{className:e.props.className,controls:!0,id:e.props.id||e.props.file.fileName,name:e.props.previewName,onClick:function(t){e.props.onClick(t)}},o.a.createElement("source",{src:n,type:t}),"Your browser does not support the video tag."):t.match("audio")?o.a.createElement("audio",{className:e.props.className,controls:!0,id:e.props.id||e.props.file.fileName,name:e.props.previewName,onClick:function(t){e.props.onClick(t)}},o.a.createElement("source",{src:n,type:t}),"Your browser does not support the audio tag."):t.match("application/pdf")?o.a.createElement("iframe",{title:"pdf",src:n,style:{width:"100%"}}):void 0},e}return Object(c.a)(a,[{key:"render",value:function(){return this.props.file?this.props.noWrapper?this.fileContainer(this.props.file.fileType,this.props.file):o.a.createElement("div",{className:this.props.containerClassName,id:this.props.id},this.fileContainer(this.props.file.fileType,this.props.file),this.props.children):null}}]),a}(o.a.Component)),A=function(e){var t=function(){var e=document.querySelectorAll(".loadByDefault");if(e){var t={threshold:0,root:null,rootMargin:"0px 0px 300px 0px"},a=new IntersectionObserver((function(e,a){e.forEach((function(e){e.isIntersecting&&(!function(e){var t=e.getAttribute("data-src");t&&(e.src=t)}(e.target),a.unobserve(e.target))}),t)}));e.forEach((function(e){a.observe(e)}))}};return function(a){if(a){var n=Object.keys(a).map((function(t){var n=e.state.artworkInfoData[t].naturalSize.naturalWidth<e.state.artworkInfoData[t].naturalSize.naturalHeight?"halfSize":null;return e.state.artworkOnDisplay[t]?o.a.createElement(C,{key:"imageSelect-".concat(t),containerClassName:"FilePreview--imageContainer ".concat(n),className:"imageSelect-FilePreview loadByDefault",onClick:function(a){return e.methods.loadEnlarge(a,t)},file:a[t],mobile:e.mobile}):o.a.createElement(C,{key:"imageSelect-".concat(t),containerClassName:"\n                        FilePreview--imageContainer \n                        FilePreview--imageContainer__empty\n                        ".concat(n),className:"imageSelect-FilePreview",onClick:function(a){return e.methods.loadEnlarge(a,t)},file:a[t],mobile:e.mobile})}));return o.a.createElement("div",{id:"imageSelect",className:"imageSelect-container ".concat(document.documentElement.clientWidth>721?"full-height":null),onClick:function(t){document.getElementById("TagsMenu").classList.contains("show-menu")&&e.context.showMenu(t)}},n,e.mobile?o.a.createElement("div",{id:"spanner",style:{width:"calc(100% - 15vw)",flex:"1 1 100%"}}):null,setTimeout((function(){t()}),50))}return null}(e.data)},F=function(e){var t=function(t){var a=e.context.state.artworkOnDisplay,n=e.file,o=e.file.fileName;if(!Object.keys(a).includes(o)){var l=null;Object.keys(a).forEach((function(e){var t=a[e];Object.values(t).includes(n.artworkFamily)&&(l=t.fileName)})),o=l}var r=0;document.getElementById("ArtworkInfo").classList.contains("ArtworkInfo-toggleTags")||(r=200,document.getElementById("ArtworkInfo").classList.add("ArtworkInfo-toggleTags")),setTimeout((function(){t.then((function(t){setTimeout((function(){e.context.scrollToHorizontal(null,"imageSelect")}),400)}))}),r)};return o.a.createElement("div",{className:"Tags-item_wrapper"},function(a){var n=null;if(a.themes){var l=a.themes;n=(l=l.map((function(t){return{type:"theme",title:t,onClick:e.context.filterByTheme}}))).map((function(e,a){return o.a.createElement("div",{key:"tag-".concat(e).concat(a),className:"Tags-item_container",onClick:function(a){a.stopPropagation(),t(e.onClick(a,e.title,!0))}},o.a.createElement("p",{className:"Tags-item_text"},e.title))}))}var r=Object.keys(a.category),i=(r=r.map((function(t){return{type:"category",title:t,onClick:e.context.filterByCategory}}))).map((function(e,a){return o.a.createElement("div",{key:"category-".concat(e.title).concat(a),className:"Tags-item_container",onClick:function(a){a.stopPropagation(),t(e.onClick(a,e.title,!0))}},o.a.createElement("p",{className:"Tags-item_text"},e.title))})),c=[];r.forEach((function(t){c=(c=Object.keys(a.category[t.title]).map((function(e){return e}))).map((function(a){return{type:"subcategory",title:a,category:t.title,onClick:e.context.filterBySubcategory}}))}));var s=c.map((function(e){if("studio"!==e.title)return o.a.createElement("div",{key:"subcategory-".concat(e.title),className:"Tags-item_container",onClick:function(a){a.stopPropagation(),t(e.onClick(a,e.category,e.title,!0))}},o.a.createElement("p",{className:"Tags-item_text"},e.title))})),u=[];r.forEach((function(t){Object.keys(a.category[t.title]).forEach((function(n){var o=a.category[t.title][n];0!==o.length&&(u=o.map((function(a){return{type:"listItem",title:a,category:t.title,subcategory:n,onClick:e.context.filterByListitem}})))}))}));var m=u.map((function(e){return o.a.createElement("div",{key:"listitem-".concat(e.title),className:"Tags-item_container",onClick:function(a){a.stopPropagation(),t(e.onClick(a,e.category,e.subcategory,e.title,!0))}},o.a.createElement("p",{className:"Tags-item_text"},e.title))}));return[].concat(Object(h.a)(n),Object(h.a)(s),Object(h.a)(i),Object(h.a)(m))}(e.file))},M=a(39),T=a.n(M),_=function(e){return o.a.createElement("div",{className:(e.file.open&&e.context.state.mobile,"ArtworkInfo-container"),id:"ArtworkInfo",style:{width:"".concat(e.mobile?"100%":"".concat(e.file.currentWidth,"px"))}},o.a.createElement("div",{key:"ArtworkInfo-wrapper",className:"ArtworkInfo-wrapper"},o.a.createElement("div",{key:"ArtworkInfo-container_text",className:"ArtworkInfo-container_text"},function(){var t=function(){return e.file.foreground.artworkTitle?o.a.createElement("em",{className:"ArtworkInfo_artworkTitle"},e.file.foreground.artworkTitle):null};return o.a.createElement("div",{className:"ArtworkInfo-Title"},t(),function(){if("none"!==e.file.foreground.artworkFamily)return o.a.createElement("div",{className:e.file.foreground.artworkTitle?"ArtworkInfo_artworkFamily":"ArtworkInfo_artworkTitle"},e.file.foreground.artworkTitle?o.a.createElement("span",null,"part of "):null,o.a.createElement("em",{className:"ArtworkInfo_artworkFamily_variable"},e.file.foreground.artworkFamily))}(),function(){var t=e.file.foreground.location?e.file.foreground.location:null,a=e.file.foreground.year?e.file.foreground.year:null;return t&&a?o.a.createElement("div",{key:"location/year",className:"ArtworkInfo_locationYear"},"(",t,". ",a,")"):!a&&t?o.a.createElement("div",{key:"location",className:"ArtworkInfo_locationYear"},"(",t,")"):a?o.a.createElement("div",{key:"year",className:"ArtworkInfo_locationYear"},"(",a,")"):null}())}(),o.a.createElement("div",{className:"ArtworkInfo--descriptions"},e.file.foreground.artworkDescription?o.a.createElement("div",{className:"ArtworkInfo--artworkDescription ArtworkInfo--descriptions_instance"},T()(e.file.foreground.artworkDescription)):null,e.file.foreground.familyDescription?o.a.createElement("div",{className:"ArtworkInfo--familyDescription ArtworkInfo--descriptions_instance"},T()(e.file.foreground.familyDescription)):null)),o.a.createElement(F,{file:e.file.foreground,context:e.context}),o.a.createElement("div",{key:"ArtworkInfo-container_seealso",className:"ArtworkInfo-container_seealso"},function(){var t=[];e.file.foreground.seeAlso.length>0&&(t=e.file.foreground.seeAlso.map((function(t){return o.a.createElement(C,{loadbydefault:"true",key:"ArtworkInfo-".concat(t),className:"ArtworkInfo-preview",containerClassName:"ArtworkInfo-preview-container",file:e.artworkInfoData[t],onClick:function(a){return e.loadEnlarge(a,t)},id:"seeAlso-".concat(t)})})),t=o.a.createElement("div",{key:"SeeAlso-related",className:"SeeAlso-related SeeAlso-wrapper"},o.a.createElement("div",{className:"subtitle subtitle_seeAlso"},"see also:"),o.a.createElement("div",{className:"SeeAlso-related_images"},t)));var a=[];if(e.context.state.relatedArtwork[e.file.foreground.artworkFamily].column.fileIds.length>1){var n=e.context.state.relatedArtwork[e.file.foreground.artworkFamily].column.fileIds.filter((function(t){return t!==e.file.foreground.fileName}));a=n.map((function(t){return o.a.createElement(C,{loadbydefault:"true",key:"ArtworkInfo-".concat(t),className:"ArtworkInfo-preview",containerClassName:"ArtworkInfo-preview-container",file:e.artworkInfoData[t],onClick:function(a){return e.loadEnlarge(a,t)},id:"seeAlso-".concat(t)})})),a=o.a.createElement("div",{key:"SeeAlso-previous",className:"SeeAlso-previous SeeAlso-wrapper"},o.a.createElement("div",{className:"subtitle subtitle_seeAlso"},"related:"),o.a.createElement("div",{className:"SeeAlso-related_images"},a))}var l=[a];l=[t].concat(Object(h.a)(l));var r=function(){return!(!Array.isArray(a)&&!Array.isArray(t))};return r(),o.a.createElement("div",{className:r()?"ArtworkInfo-seeAlso-container single-container":"ArtworkInfo-seeAlso-container"},l)}())))},B=function(e){if(e.relatedArtwork)return o.a.createElement("div",{className:"previewBubble-container",id:"previewBubble-container"},o.a.createElement("div",{className:"previewBubble-wrapper",id:"previewBubble-wrapper"},e.file&&e.file.open?function(t){var a=[];e.file.familySequence.familyName;return(a=e.relatedArtwork.map((function(a){return a===t.background.fileName?o.a.createElement("div",{key:"previewBubble-".concat(a),id:"previewBubble-".concat(a),onClick:function(t){e.enlarge(t,a)},className:"previewBubble previewBubble-filled"}):o.a.createElement("div",{key:"previewBubble-".concat(a),id:"previewBubble-".concat(a),onClick:function(t){e.enlarge(t,a)},className:"previewBubble"})}))).length<=1&&(a=null),a}(e.file):null),e.children)},L=a(109),P=a.n(L),q=function(e){return o.a.createElement("div",{className:"controls"},o.a.createElement("div",{className:"controls-button controls-slideButton",onClick:function(t){return function(t){if(t.stopPropagation(),!e.context.state.enlarge||!e.context.state.enlarge.open)return e.context.loadEnlarge(t,"portrait.jpg"),void setTimeout((function(){document.getElementById("ArtworkInfo")&&document.getElementById("ArtworkInfo").classList.add("info-up")}),200);document.getElementById("TagsMenu").classList.contains("show-menu")&&e.context.showMenu(t);var a=document.getElementById("ArtworkInfo");a&&a.classList.toggle("info-up")}(t)}},o.a.createElement("img",{className:"Nav-infoButton-icon",alt:"info buton",src:"icons/info.png"})),o.a.createElement("div",{className:"controls-button controls-exitButton",onClick:function(t){t.stopPropagation();var a=document.getElementById("ArtworkInfo"),n=document.getElementById("TagsMenu"),o=e.context.state.enlarge;if(!a||!a.classList.contains("info-up"))return n.classList.contains("show-menu")?(console.log("run close Menu"),void e.context.showMenu(t)):void(o&&o.open&&(console.log("run close enlar"),e.context.closeEnlarge(t)));a.classList.toggle("info-up")}},o.a.createElement("span",null,"x")))},K=function(e){var t;return o.a.createElement("div",{className:"enlarge-info"},e.context.state.enlarge&&e.context.state.enlarge.foreground?o.a.createElement(n.Fragment,null,o.a.createElement(_,{file:e.context.state.enlarge,context:e.context,artworkInfoData:e.context.state.artworkInfoData,loadEnlarge:e.context.loadEnlarge,hideArtworkInfo:e.context.hideArtworkInfo,mobile:e.mobile}),o.a.createElement(B,{file:e.context.state.enlarge,relatedArtwork:e.context.state.enlarge?e.context.state.enlarge.familySequence.familySequence:[],enlarge:e.context.loadEnlarge,context:e.context})):null,e.mobile?o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"menu-container",onClick:function(t){console.log("combined show menu"),e.context.showMenu(t)}},o.a.createElement("div",{className:"menu-title"},(t="menu",Array.from(t).map((function(e,a){return o.a.createElement("div",{key:"".concat(t,"-leter-").concat(a),className:"title-letter white-font"},e)}))))),o.a.createElement(q,{context:e.context})):null)},H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{onClick:function(t){return e.props.closeEnlarge(t)},className:"enlargeContainer",id:"enlargeContainer"},o.a.createElement(n.Fragment,null,o.a.createElement(P.a,{className:"pinchContainer",panEvent:{viewNext:this.props.context.viewNext,viewPrev:this.props.context.viewNext,showMenu:this.props.context.showMenu,showInfo:this.props.context.showInfo,closeEnlarge:this.props.context.closeEnlarge},mobile:this.props.mobile},o.a.createElement("div",{id:"foreground",className:"foreground-transition"},o.a.createElement("img",{alt:this.props.context.state.enlarge?this.props.context.state.enlarge.fileName:"foreground",id:"foreground-img",src:"#",className:"enlarge-preview"})),o.a.createElement("div",{id:"background",className:"foreground-transition"},o.a.createElement("img",{alt:this.props.context.state.enlarge?this.props.context.state.enlarge.fileName:"background",id:"background-img",src:"#",className:"enlarge-preview"}))),o.a.createElement(K,{context:this.props.context,mobile:this.props.mobile}),": null"))}}]),a}(o.a.Component),W=function(e){var t=function(){return!!e.context.state.enlarge&&!!e.context.state.enlarge.open};return o.a.createElement("div",{className:"Navbar",style:{}},o.a.createElement(n.Fragment,null,o.a.createElement("button",{id:"button-next",onClick:function(){return e.context.viewNext(1)},className:t()?"Nav-button Nav-button_next":"Nav-button Nav-button_next move-right"},o.a.createElement("img",{alt:"view next",src:"icons/point-right.png"})),o.a.createElement("button",{id:"button-prev",onClick:function(){return e.context.viewNext(-1)},className:t()?"Nav-button Nav-button_prev":"Nav-button Nav-button_prev move-left"},o.a.createElement("img",{alt:"view previous",src:"icons/point-left.png"})),o.a.createElement("div",{className:"Nav-button Nav-button-menu",onClick:function(t){return e.context.showMenu(t)}},o.a.createElement("img",{className:"menu",alt:"menu button",src:"icons/menu.png"})),e.context.state.enlarge&&e.context.state.enlarge.open?o.a.createElement("div",{className:"Nav-button Nav-infoButton",onClick:function(){return e.context.showInfo()}},o.a.createElement("img",{className:"Nav-infoButton-icon",alt:"info buton",src:"icons/info.png"})):null))},U=function(e){return o.a.createElement("div",{className:"FilterTree-form ".concat(e.containerClass?e.containerClass:"")},e.children,e.listId?o.a.createElement("img",{className:"FilterTree-caret",src:"icons/triangle.svg",alt:"open or close filter category",onClick:function(t){console.log("caret clicked"),t.stopPropagation(),t.target.classList.toggle("FilterTree-caret_down");var a=document.getElementById(e.listId),n=1;a.classList.contains("FilterTree-list_closed")||a.style.maxHeight||(a.style.maxHeight="".concat(a.scrollHeight,"px"),n+=200),setTimeout((function(){if(a.classList.contains("FilterTree-list_closed")){a.style.maxHeight=a.scrollHeight+"px";var e=document.getElementById("FilterTree-list_all");e.style.maxHeight&&setTimeout((function(){e.style.maxHeight="".concat(e.scrollHeight,"px")}),300)}else a.style.maxHeight=0;a.classList.toggle("FilterTree-list_closed")}),n)}}):null)},z=function(e){return o.a.createElement(n.Fragment,null,o.a.createElement("label",{className:"FilterTree-title",htmlFor:"FilterTree-checkbox-".concat(e.title)},e.title),o.a.createElement("div",{className:"styledCheckbox-container"},o.a.createElement("input",{className:"styledCheckbox-checkbox",id:"FilterTree-checkbox-".concat(e.title),type:"checkbox",checked:e.isChecked,onChange:e.onChange}),o.a.createElement("span",{onClick:e.onChange,className:"styleCheckbox-checkmark"})))},R=function(e){var t;return o.a.createElement("div",{className:"FilterTree-container_main"},o.a.createElement(U,{containerClass:"FilterTree-form_categories",listId:"FilterTree-list_all"},o.a.createElement("div",{className:"FilterTree-title FilterTree-title_categories"},(t="Categories",Array.from(t).map((function(e,a){return o.a.createElement("div",{key:"".concat(t,"-leter-").concat(a),className:"title-letter"},e)}))))),o.a.createElement("div",{className:"FilterTree-list FilterTree-category",id:"FilterTree-list_all"},e.categoriesData.map((function(t){return o.a.createElement("ul",{className:"FilterTree-list FilterTree-category",key:"FilterTree-category-".concat(t.category)},o.a.createElement(U,{listId:Object.keys(t.subcategory).length>0?"FilterTree-list_category-".concat(t.category):null},o.a.createElement(z,{title:t.category,onChange:function(a){return e.context.filterByCategory(a,t.category)},isChecked:e.context.categoryChecked(t.category)})),function(t,a){var n=Object.keys(t).map((function(n){return o.a.createElement("li",{className:"FilterTree-subcategory_item",key:"FilterTree-".concat(a,"-").concat(n)},o.a.createElement(U,{listId:t[n].length>0?"FilterTree-list_subcategory-".concat(n):null},o.a.createElement(z,{title:n,onChange:function(t){return e.context.filterBySubcategory(t,a,n)},isChecked:e.context.subcategoryChecked(a,n)})),t[n].length>0?o.a.createElement("ul",{className:"FilterTree-list FilterTree-listItems",id:"FilterTree-list_subcategory-".concat(n)},t[n].map((function(t){return o.a.createElement("li",{className:"FilterTree-item_listItem",key:"FilterTree-listItem-".concat(n,"-").concat(t)},o.a.createElement(z,{title:t,onChange:function(o){return e.context.filterByListitem(o,a,n,t)},isChecked:e.context.listitemChecked(a,n,t)}))}))):null)}));return o.a.createElement("ul",{className:"FilterTree-list FilterTree-subcategories",id:"FilterTree-list_category-".concat(a)},n)}(t.subcategory,t.category))}))))},Y=function(e){return o.a.createElement("div",{className:"FilterTree-container",id:"TagsMenu"},o.a.createElement(R,{categoriesData:e.context.state.categoriesData||[],context:e.context}))};Array.from(document.getElementsByTagName("h4")).forEach((function(e){e.style.whiteSpace="normal"}));var G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).spreadLetters=function(e){return Array.from(e).map((function(t,a){return o.a.createElement("div",{key:"".concat(e,"-leter-").concat(a),className:"title-letter white-font"},t)}))},n.state={imgSelectLoaded:document.querySelectorAll(".FilePreview--imageContainer")},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(k.Consumer,null,(function(){return o.a.createElement("div",{className:"frontEndIndex-container"},o.a.createElement(Y,{context:e.context,categoriesData:e.context.state.categoriesData}),o.a.createElement("div",{id:"images",className:e.context.state.mobile?"images-container":"images-container images-grid"},o.a.createElement(A,{data:e.context.state.artworkInfoData,mobile:e.context.state.mobile,state:e.context.state,context:e.context,methods:{enlarge:e.context.enlarge,loadEnlarge:e.context.loadEnlarge,toggleMobile:e.context.toggleMobile,lazyLoad:e.context.lazyLoadImages}}),o.a.createElement(H,{nextEnlarge:e.context.state.nextEnlarge,file:e.context.state.enlarge,onClick:e.context.closeEnlarge,artworkInfoData:e.context.state.artworkInfoData,loadEnlarge:e.context.loadEnlarge,closeEnlarge:e.context.closeEnlarge,hideArtworkInfo:e.context.hideArtworkInfo,context:e.context,mobile:e.context.state.mobile})),e.context.state.mobile?null:o.a.createElement(W,{context:e.context}))}))}}]),a}(o.a.Component);G.contextType=k;var J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=Object(p.a)({},this.props);return o.a.createElement(E,null,o.a.createElement(n.Fragment,null,o.a.createElement(G,{props:e})))}}]),a}(o.a.Component),V=a(27),X=a(14),Q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={show:e.showModal,setShow:!1},n.handleClose=function(){return n.setState({setShow:!1,show:!1},console.log(n.state))},n.handleShow=function(){return n.setState({setShow:!0,show:!0})},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{show:this.state.show,onHide:this.handleClose},o.a.createElement(V.a.Body,null,this.props.message,this.props.children),o.a.createElement(V.a.Footer,null,this.props.confirm?o.a.createElement(X.a,{variant:"success",onClick:function(){e.props.confirmedAction()}},"Confirm"):null,o.a.createElement(X.a,{variant:this.props.confirm?"danger":"success",onClick:function(){e.props.onClose()}},this.props.confirm?"Cancel":"Okay"))))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.showModal?{show:!0}:{show:!1}}}]),a}(n.Component),Z=o.a.createContext(),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={fileData:{files:{},column:{id:"column-1",fileIds:[]},columnOrder:["column-1"]},familySetupData:{useFamilySetup:!1,artworkFamily:null,familyDescription:null,location:null,year:null,seeAlso:[],themes:[],category:{},displayTriggers:{category:[],subcategory:[],listitems:[],themes:[],year:"",location:""}},relatedArtwork:{},categoriesData:[],seeAlsoData:{renderFiles:{fileNames:[]}},themesData:[],artworkFamilyList:[],serverFileDir:[],showModal:!1},n.changeFileName=function(e){var t="".concat(e.target.value.split(".")[0],".").concat(n.state.fileType.split("/")[1]);n.setState({fileName:t,filePath:"uploads/".concat(t)})},n.onChange=function(e,t,a){console.log("onchange"),console.log(e.target.value?e.target.value:e.target.innerHTML);var o=null,l=Object(p.a)({},n.state);a?(o=l.fileData.files[a],console.log(l.fileData.files[a])):o=l.familySetupData,o[t]||(o[t]=[]);var r=e.target.value?e.target.value:e.target.textContent;o[t]=r,n.setState(l)},n.inputFamilyDescription=function(e){var t=Object(p.a)({},n.state);t.familySetupData.familyDescription=e,n.setState(t)},n.addNew=function(e,t,a,o,l,r){return e.preventDefault(),new Promise((function(e,i){var c=document.getElementById(t).value;if(!n.verify().verified){console.log("requestKey"),console.log(o),console.log("stateKey"),console.log(l);var s=Object(p.a)({},n.state);return s[l].includes(c)?i():(s[l]=[].concat(Object(h.a)(s[l]),[c]),void n.setState(s,e({modalMessage:"State updated."})))}"artworkFamily"===o?(console.log(o),O.a.post(a,Object(b.a)({},o,c)).then((function(t){console.log("res"),console.log(t);t.data[o];r&&r("Successfully recored");var a=Object(p.a)({},n.state);a.familySetupData.artworkFamily=c,n.setState(a,(function(){return e()}))})).catch((function(e){console.log("error!!!"),console.log(e.toJSON()),r&&r(e.toString()),i(e)}))):(console.log(o),O.a.put(a,Object(b.a)({},o,c)).then((function(t){console.log("______________________________"),console.log(t),console.log("______________________________"),n.setState(Object(b.a)({},l,[].concat(Object(h.a)(n.state[l]),[c])),(function(){r?(r(t.data),e()):e()}))})).catch((function(e){console.log("error!!!"),console.log(e.toJSON()),r&&r("Theme ".concat(c," has already been recorded")),i()})))}))},n.deleteTheme=function(e){return console.log("deleteTheme runs"),new Promise((function(t,a){if(n.verify().verified)console.log("run api/themes/delte"),console.log("theme: ".concat(e)),O.a.put("/api/themes/delete",{list:e}).then((function(a){console.log("themee deleted");var o=Object(p.a)({},n.state);o.themesData=o.themesData.filter((function(t){return t!==e})),console.log("newState.themesData"),console.log(o.themesData),n.setState(o,(function(){t()}))})).catch((function(e){return a()}));else{console.log("NOT verified");var o=Object(p.a)({},n.state);o.themesData=o.themesData.filter((function(t){return t!==e})),n.setState(o,(function(){return t({modalMessage:"State updated."})}))}}))},n.readImageDir=function(){return new Promise((function(e,t){O.a.get("/fetchImages").then((function(t){console.log(t),e(t)})).catch((function(e){console.log("readImageDir failed"),console.log(e),t(e)}))}))},n.categoryMethods={getCategoryNames:function(){var e=Object.keys(n.state.categoriesOptionList.data).map((function(e){return o.a.createElement("option",{key:"add-category-".concat(e),value:e},e)})),t=Object(p.a)({},n.state);t.categoriesOptionList.DOM={},t.categoriesOptionList.DOM.categories=e,n.setState(t)},getSubcategoryNames:function(){var e=Object(p.a)({},n.state);e.categoriesOptionList.DOM||(e.categoriesOptionList.DOM={});var t=[],a=null;if(document.getElementById("add-category").value){if(Object.keys(n.state.categoriesOptionList.data).includes(document.getElementById("add-category").value)){console.log("input has value");var l=document.getElementById("add-category").value;t=n.state.categoriesOptionList.data[l].map((function(e){return o.a.createElement("option",{key:"add-subcategory-".concat(e),value:e},e)}))}}else a=[],a=Object.keys(n.state.categoriesOptionList.data).map((function(e){return o.a.createElement("optgroup",{key:e,label:e},n.state.categoriesOptionList.data[e].map((function(e){return o.a.createElement("option",{key:"add-subcategory-".concat(e),value:e},e)})))}));console.log(a),e.categoriesOptionList.DOM.subCategories=t,a&&(e.categoriesOptionList.DOM.subCategories=a),n.setState(e)},submitNewCategory:function(){return new Promise((function(e,t){console.log("submitNew");var a=document.getElementById("add-category"),o=document.getElementById("add-subcategory"),l=document.getElementById("add-listitem");a.value&&""!==a.value&&" "!==a.value||t({modalMessage:"Action failed. Cannot submit empty value."});var r={category:a.value,subcategory:{}};if(o.value?r.subcategory=Object(b.a)({},o.value,[]):r.subcategory={},l.value?r.subcategory[o.value]=[l.value]:r.subcategory[o.value]=[],console.log("reqBody"),console.log(r),!n.verify({customGuestMessage:!0}).verified){var i=Object(p.a)({},n.state);return i.categoriesData.push(r),n.setState(i,e({modalMessage:"State updated"}))}O.a.post("/api/categories/create",r).then((function(t){var o=Object(p.a)({},n.state);o.categoriesData=[].concat(Object(h.a)(o.categoriesData),[t.data]),o.categoriesOptionList.data=Object(p.a)(Object(p.a)({},o.categoriesOptionList.data),{},Object(b.a)({},a.value,[])),n.setState(o,e({modalMessage:"New category registered."}))})).catch((function(e){console.log(e),t({modalMessage:"Action failed."})}))}))},updateCategory:function(){return new Promise((function(e,t){var a=document.getElementById("add-category"),o=document.getElementById("add-subcategory"),l=document.getElementById("add-listitem");if(Object.values(n.state.categoriesData).map((function(e){return e.category})).includes(a.value)){var r=n.state.categoriesData.find((function(e){return e.category===a.value})),i=n.state.categoriesData.indexOf(r),c=Object(p.a)({},n.state.categoriesData),s=c[i].subcategory[o.value];if(s||(s=[],c[i].subcategory[o.value]=s),l.value&&(c[i].subcategory[o.value]=[].concat(Object(h.a)(s),[l.value])),!n.verify({customGuestMessage:!0}).verified){var u=Object(p.a)({},n.state);return u.categoriesData[i]=r,n.setState(u,e({modalMessage:"State updated."}))}O.a.put("/api/categories/update",r).then((function(t){var a=Object(p.a)({},n.state);a.categoriesData[i]=t.data,n.setState(a,e({modalMessage:"Database updated."}))})).catch((function(e){return t({modalMessage:"Action failed."})}))}else n.categoryMethods.submitNewCategory().then((function(t){return e({modalMessage:"New category registered."})})).catch((function(e){return t({modalMessage:"Action failed."})}))}))},deleteCategory:function(e,t,a){return new Promise((function(l,r){if(!n.verify({customGuestMessage:!0}).verified){var i=Object(p.a)({},n.state),c=i.categoriesData.indexOf(a.category);return t?i.categoriesData.splice(c,1,t):i.categoriesData=i.categoriesData.filter((function(e){return e.category!==a.category})),n.setState(i,l({modalMessage:"State updated."}))}O.a.put("/api/categories/delete",{categoryName:e,updateContent:t}).then((function(t){var r=Object(p.a)({},n.state),i=r.categoriesData.find((function(t){return t.category===e})),c=r.categoriesData.indexOf(i);if(a.subcategory)if(a.listitem){var s=r.categoriesData[c].subcategory[a.subcategory];r.categoriesData[c].subcategory[a.subcategory]=s.filter((function(e){return e!==a.listitem})),t.modalMessage=o.a.createElement("span",null,"Listitem ",o.a.createElement("strong",null,a.listitem)," deleted from ",o.a.createElement("strong",null,a.subcategory)," subcategory in ",o.a.createElement("strong",null,a.category)," category.")}else a.subcategory&&!a.listitem&&(delete r.categoriesData[c],r.categoriesData[c]=t.data,t.modalMessage=o.a.createElement("span",null,"Subcategory ",o.a.createElement("strong",null,a.subcategory)," deleted from ",o.a.createElement("strong",null,a.category)," category."));else r.categoriesData=r.categoriesData.filter((function(t){return t.category!==e})),t.modalMessage=o.a.createElement("span",null,"Category ",o.a.createElement("strong",null,a.category)," deleted.");n.setState(r,(function(){l(t)}))})).catch((function(e){e.modalMessage="Action failed",r(e)}))}))},autoCheckCategories:function(e,t,a,o){var l=n.state.familySetupData.category;if(e&&(l=n.state.fileData.files[e].category),o){if(!l)return;return!!l[t]&&(!!l[t][a]&&!!l[t][a].includes(o))}if(a){if(!l)return;return!!l[t]&&!!l[t][a]}if(t){if(!l)return;return!!l[t]}},onCheck:function(e,t){var a=n.state.familySetupData;t&&(a=n.state.fileData.files[t],n.state.fileData.files[t].category||(n.state.fileData.files[t].category={}));var o=function(e,t,a,o){return o?Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},o,Object(p.a)(Object(p.a)({},n.state.fileData.files[o]),{},{category:Object(p.a)(Object(p.a)({},n.state.fileData.files[o].category),{},Object(b.a)({},e,Object(p.a)(Object(p.a)({},n.state.fileData.files[o].category[e]),{},Object(b.a)({},t,a))))})))})}):Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{category:Object(p.a)(Object(p.a)({},n.state.familySetupData.category),{},Object(b.a)({},e,Object(p.a)(Object(p.a)({},n.state.familySetupData.category[e]),{},Object(b.a)({},t,a))))})})};if(e.target.checked){var l=function(e){return Array.from(e.getElementsByTagName("input"))[0]},r=function(t){return"list--listitem"===t?e.target.parentNode.classList.contains(t):e.target.parentNode.parentNode.classList.contains(t)},i=l(e.target.parentNode.parentNode.parentNode),c=l(e.target.parentNode.parentNode);switch(!0){case r("list--category"):n.setState(function(e,t){return t?Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},t,Object(p.a)(Object(p.a)({},n.state.fileData.files[t]),{},{category:Object(p.a)(Object(p.a)({},n.state.fileData.files[t].category),{},Object(b.a)({},e,{}))})))})}):Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{category:Object(p.a)(Object(p.a)({},n.state.familySetupData.category),{},Object(b.a)({},e,{}))})})}(i.value,t));break;case r("list--listitem"):i=l(e.target.parentNode.parentNode.parentNode),c=l(e.target.parentNode.parentNode);var s=e.target.value,u=[s];a.category&&a.category[i.value]&&a.category[i.value][c.value]&&a.category[i.value][c.value].length>0&&(u=[].concat(Object(h.a)(a.category[i.value][c.value]),[s])),n.setState(o(i.value,c.value,u,t));break;case r("list--subcategory"):n.setState(function(e,t,a){return a?Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},{category:Object(p.a)(Object(p.a)({},n.state.fileData.files[a].category),{},Object(b.a)({},e,Object(p.a)(Object(p.a)({},n.state.fileData.files[a].category[e]),{},Object(b.a)({},t,[]))))})))})}):Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{category:Object(p.a)(Object(p.a)({},n.state.familySetupData.category),{},Object(b.a)({},e,Object(p.a)(Object(p.a)({},n.state.familySetupData.category[e]),{},Object(b.a)({},t,[]))))})})}(i.value,c.value,t));break;default:return}}else{var m=e.target.classList[1],f=e.target.value,d=null,g=null,y=null,v=Object(p.a)({},a),O=Object(p.a)({},n.state),k=null;if(k=t?O.fileData.files[t].displayTriggers:O.familySetupData.displayTriggers,"listitem"===m)d=e.target.parentNode.parentNode.id,g=e.target.parentNode.parentNode.parentNode.id,y=a.category[g][d].filter((function(e){return e!==f})),O=o(g,d,y,t),k[m]=y;else if("subcategory"===m){g=e.target.parentNode.parentNode.parentNode.id,delete v.category[g][f],Array.from(document.getElementById(f).getElementsByTagName("input")).forEach((function(e){return e.checked=!1})),O=t?{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},t,Object(p.a)(Object(p.a)({},n.state.fileData.files[t]),{},{category:v.category})))})}:{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{category:v.category})};var E=n.state.categoriesData.filter((function(e){return e.category===g}))[0].subcategory[f];k.listitems=k.listitems.filter((function(e){return!E.includes(e)})),k[m]=k[m].filter((function(e){return e!==f}))}else if("category"===m){g=e.target.parentNode.parentNode.id,delete v.category[g],Array.from(document.getElementById(g).getElementsByTagName("input")).forEach((function(e){return e.checked=!1})),O=t?{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},t,Object(p.a)(Object(p.a)({},n.state.fileData.files[t]),{},{category:v.category})))})}:{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{category:v.category})};var w=Object.values(n.state.categoriesData.filter((function(e){return e.category===g}))[0].subcategory).flat();k.listitems=k.listitems.filter((function(e){return!w.includes(e)})),k[m]=k[m].filter((function(e){return e!==g})),k.subcategory=k.subcategory.filter((function(e){return!n.state.categoriesOptionList.data[g].includes(e)}))}n.setState(O)}}},n.fileDataMethods={deleteImage:function(e){O.a.delete("/deleteImage",e).then((function(e){alert(e)}))},deleteDBrecord:function(e,t,a){return new Promise((function(a,o){n.state.artworkInfoData[e];var l={mobilePath:"file.mobilePath",thumbnailPath:"file.thumbnailPath",desktopPath:"file.desktopPath"};O.a.delete("/api/artworkInfo/delete/".concat(e)).then((function(o){O.a.delete("/deleteImage/delete/".concat(e),l).then((function(o){var l=Object(p.a)({},n.state.relatedArtwork);delete l[t].files[e];var r=l[t].column.fileIds.filter((function(t){return t!==e}));l[t].column.fileIds=r;var i=n.state.artworkOnDisplay;delete i[e];var c=n.state.artworkInfoData;delete c[e],n.setState({relatedArtwork:l,artworkInfoData:c,artworkOnDisplay:i},(function(){o.modalMessage="File and its DB record deleted",a(o)}))})).catch((function(e){console.log(e)}))})).catch((function(e){return console.log(e)}))}))},serverFileToState:function(e){return new Promise((function(t,a){e||a("file record not found");var o=Object(p.a)({},n.state);o.fileData.files=Object(p.a)(Object(p.a)({},o.fileData.files),{},Object(b.a)({},e.fileName,e)),e.displayTriggers||(o.fileData.files[e.fileName].displayTriggers={category:[],subcategory:[],listitems:[],themes:[],year:"",location:""}),n.setState(o,(function(){t("file transferred")}))}))},onChange:function(e,t,a,o){var l,r=Object(p.a)({},n.state);if("themes"===t){var i,c=[];return r.fileData.files[a][t]||(r.fileData.files[a][t]=[]),r.fileData.files[a].displayTriggers[t]||(r.fileData.files[a].displayTriggers[t]=[]),c=n.state.fileData.files[a][t].includes(e)?n.state.fileData.files[a][t].filter((function(t){return t!==e})):[].concat(Object(h.a)(n.state.fileData.files[a][t]),[e]),r=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},(i={},Object(b.a)(i,t,c),Object(b.a)(i,"displayTriggers",Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,c))),i))))})}),void n.setState(r,(function(){o&&o()}))}if("year"!==t&&"location"!==t){if(r.fileData.files[a].displayTriggers[t]||(r.fileData.files[a].displayTriggers[t]=[]),n.state.fileData.files[a].displayTriggers[t].includes(e)){var s=n.state.fileData.files[a].displayTriggers[t].filter((function(t){return t!==e}));return r=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,s))})))})}),void n.setState(r,(function(){o&&o()}))}}else r=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},(l={},Object(b.a)(l,t,e),Object(b.a)(l,"displayTriggers",Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,e))),l))))})});n.setState(r)},onChangeDisplayTriggers:function(e,t,a,o,l){console.log("familySetup"),console.log(o);var r="year"!==t&&"location"!==t?"themes":"string",i=Object(p.a)({},n.state),c=null,s=null;if((c=o?i.familySetupData:i.fileData.files[a]).displayTriggers||(c.displayTriggers={category:[],subcategory:[],listitems:[],themes:[],year:"",location:""}),s=c.displayTriggers,"themes"===r){var u=[];return s[t]||(s[t]=[]),u=s[t].includes(e)?s[t].filter((function(t){return t!==e})):[].concat(Object(h.a)(s[t]),[e]),i=o?Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.familySetupData.displayTriggers),{},Object(b.a)({},t,u))})}):Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,u))})))})}),void n.setState(i,(function(){l&&l()}))}if("year"!==t&&"location"!==t){if(s[t]||(s[t]=[]),n.nest[t].includes(e)){var m=s[t].filter((function(t){return t!==e}));return i=o?Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.familySetupData.displayTriggers),{},Object(b.a)({},t,m))})}):Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,m))})))})}),void n.setState(i,(function(){l&&l()}))}}else s[t]===e&&(e=""),i=o?Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.familySetupData.displayTriggers),{},Object(b.a)({},t,e))})}):Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,Object(p.a)(Object(p.a)({},n.state.fileData.files[a]),{},{displayTriggers:Object(p.a)(Object(p.a)({},n.state.fileData.files[a].displayTriggers),{},Object(b.a)({},t,e))})))})});n.setState(i)},transferState:function(e,t,a){var o=Object(p.a)({},n.state);if(!0===t){n.setState({showModal:!0}),Object.keys(n.state.familySetupData).forEach((function(t){o=Object(p.a)(Object(p.a)({},o),{},{fileData:Object(p.a)(Object(p.a)({},o.fileData),{},{files:Object(p.a)(Object(p.a)({},o.fileData.files),{},Object(b.a)({},e.fileName,Object(p.a)(Object(p.a)({},o.fileData.files[e.fileName]),{},Object(b.a)({},t,n.state.familySetupData[t]))))})})}));var l={};l.category=Object.keys(n.state.familySetupData.category);l.subcategory=function(){var e=Object.keys(n.state.familySetupData.category),t=[];return e.forEach((function(e){t=[].concat(Object(h.a)(t),Object(h.a)(Object.keys(n.state.familySetupData.category[e])))})),t}();l.listitems=function(){var e=Object.keys(n.state.familySetupData.category),t=[];return e.forEach((function(e){Object.keys(n.state.familySetupData.category[e]).forEach((function(a){!n.state.familySetupData.category[e][a].length>0||(t=[].concat(Object(h.a)(t),Object(h.a)(n.state.familySetupData.category[e][a])))}))})),t}(),l.themes=n.state.familySetupData.themes,l.year=n.state.familySetupData.year,l.location=n.state.familySetupData.location,o.fileData.files[e.fileName].displayTriggers=l,n.familySetupMethods.getRelatedArtwork(o.fileData.files[e.fileName].artworkFamily,o).then((function(t){o.relatedArtwork=Object(p.a)(Object(p.a)({},o.relatedArtwork),{},Object(b.a)({},o.fileData.files[e.fileName].artworkFamily,t)),o.fileData.files[e.fileName].relatedArtwork=t,o.fileData.files[e.fileName].useFamilySetup=!0,delete o.fileData.files[e.fileName]._id,delete o.fileData.files[e.fileName].__v,n.setState(o,n.setState({showModal:!1}))}))}else O.a.get("/api/familySetup/none").then((function(t){var a=t.data;delete a.__v,delete a._id;var l=n.state.fileData.files[e.fileName],r=Object(p.a)({},l);Object.keys(a).forEach((function(e){r[e]=a[e]})),r.useFamilySetup=!1,o.fileData.files[e.fileName]=r,n.setState(o)})).catch((function(e){console.log(e)})),n.setState(o)},isChecked:function(e,t,a){return!!n.state.fileData.files[a][e].includes(t)},addFileToState:function(e){return new Promise((function(t,a){var l=e.target.files,r=(l.length,{files:{},column:{id:"column-1",fileIds:[]},columnOrder:["column-1"]}),i=Object(p.a)({},n.state),c=0;new Promise((function(e,t){var a={},s=Array.from(l),u=[];if(s.forEach((function(e){n.state.fileData.column.fileIds.includes(e.name)?(console.log("error"),a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.name,"Fail (already selected)"))):n.state.serverFileDir.includes(e.name)?(console.log("error"),a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.name,"Fail (already uploaded)"))):e.name.includes(" ")||e.name.includes("/")?(console.log("error"),a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.name,"Fail (File name cannot contain spaces or '/')"))):e.type.match("application/pdf")?(console.log("error"),a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.name,"Fail (PDF not supported yet)"))):u=[].concat(Object(h.a)(u),[e])})),u.length<1){var m=Object.keys(a).map((function(e){return o.a.createElement("div",{key:"fileUpload-".concat(e)},o.a.createElement("em",null,e),o.a.createElement("p",null,a[e]))}));document.getElementById("uploadFileInput").value="",t(m)}u.forEach((function(t,s){var m=new FileReader;m.onload=function(){var f=new Image;f.src=m.result,f.onload=function(){var d={naturalHeight:f.naturalHeight,naturalWidth:f.naturalWidth};if(r.files[t.name]={preview:m.result,file:l[s],fileName:t.name,fileType:t.type,familyDisplayIndex:null,src:"uploads/".concat(t.name),themes:[],seeAlso:[],category:{studio:{misc:[]}},displayTriggers:{category:[],subcategory:[],listitems:[]},artworkFamily:"none",naturalSize:d},(i=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},i.fileData.files),{},Object(b.a)({},t.name,r.files[t.name])),column:Object(p.a)(Object(p.a)({},i.fileData.column),{},{fileIds:[].concat(Object(h.a)(i.fileData.column.fileIds),[t.name])})}),relatedArtwork:Object(p.a)(Object(p.a)({},n.state.relatedArtwork),{},{none:Object(p.a)(Object(p.a)({},n.state.relatedArtwork.none),{},{files:Object(p.a)(Object(p.a)({},i.relatedArtwork.none.files),{},Object(b.a)({},t.name,r.files[t.name])),column:Object(p.a)(Object(p.a)({},i.relatedArtwork.none.column),{},{fileIds:[].concat(Object(h.a)(i.relatedArtwork.none.column.fileIds),[t.name])})})})})).artworkInfoData=Object(p.a)(Object(p.a)({},i.artworkInfoData),{},Object(b.a)({},t.name,r.files[t.name])),a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},t.name,"Success")),c+=1,console.log("objCounter"),console.log(c),c===u.length){console.log("objCounter === fileCount");var g=Object.keys(a).map((function(e){return o.a.createElement("div",{key:"fileUpload-".concat(e)},o.a.createElement("strong",null,e,":"),o.a.createElement("p",{className:"subtitle"},a[e]))}));e(g)}}},m.readAsDataURL(t)}))})).then((function(e){n.setState(i,(function(){return t(e)}))})).catch((function(e){return a(e)}))}))},uploadFile:function(e){return new Promise((function(t,a){var o=n.state.fileData.files,l=new FormData;l.append("artworkImage",o[e].file,o[e].artwrokTitle||o[e].fileName),O.a.post("/api/artworkInfo/imageUpload",l).then((function(o){console.log("og image uploaded"),O.a.post("/resize/".concat(e)).then((function(e){n.readImageDir().then((function(e){return t("uploads folder successfully read")}))})).catch((function(e){console.log("upload file fail"),console.log(e),a(e)}))}))}))},removeFile:function(e,t){document.getElementById("uploadFileInput")&&(document.getElementById("uploadFileInput").value="");var a=Object(p.a)({},n.state.fileData.files);delete a[e];var o=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{column:Object(p.a)(Object(p.a)({},n.state.fileData.column),{},{fileIds:n.state.fileData.column.fileIds.filter((function(t){return t!==e}))}),files:a})});t&&(delete o.relatedArtwork[t].files[e],o.relatedArtwork[t].column.fileIds=o.relatedArtwork[t].column.fileIds.filter((function(t){return t!==e}))),n.setState(o)},onDragEnd:function(e){var t=e.destination,a=e.source,o=e.draggableId;if(t){var l=n.state.fileData.column[a.droppableId],r=n.state.fileData.column.fileIds;r.splice(a.index,1),r.splice(t.index,0,o);var i=Object(p.a)(Object(p.a)({},l),{},{fileIds:r}),c=Object(p.a)({},n.state);c.fileData.column[i.id]=i,n.setState(c)}},onDragEndFamilyList:function(e){var t=e.destination,a=e.source,o=e.draggableId;if(t){var l=e.destination.droppableId,r=l.slice(0,l.match("-relatedArtworks").index),i=n.state.relatedArtwork[r].column[a.droppableId],c=n.state.relatedArtwork[r].column.fileIds;c.splice(a.index,1),c.splice(t.index,0,o);var s=Object(p.a)(Object(p.a)({},i),{},{fileIds:c}),u=Object(p.a)({},n.state);u.relatedArtwork[r].column[s.id]=s,n.setState(u)}},updateArtworkInfo:function(e){return new Promise((function(t,a){if(!e.category||!Object.keys(e.category).length>0)a("To submit, select categories for file ".concat(e.fileName));else if(e.artworkFamily){var o=e.artworkFamily,l=n.state.relatedArtwork[o].column.fileIds.indexOf(e.fileName);O.a.get("/api/artworkInfo/fileName/".concat(e.fileName)).then((function(r){if(console.log("res.data.familyDisplayIndex"),console.log(r.data),console.log(r.data[0].familyDisplayIndex),r.data[0].familyDisplayIndex===l){console.log("fam index not changed");var i=n.state.fileData.files[e.fileName];n.fileDataMethods.relateSeeAlso(e).then((function(n){O.a.put("/api/artworkInfo/update/".concat(e.fileName),i).then((function(e){t("file updated")})).catch((function(e){console.log("Record update failed"),console.log(e),a("Record update failed")}))})).catch((function(e){console.log(e),a()}))}else n.fileDataMethods.relateSeeAlso(e).then((function(l){var r=Object.keys(n.state.relatedArtwork[o].files).length,i=0;Object.keys(n.state.relatedArtwork[o].files).forEach((function(l){var c=n.state.artworkInfoData[l];l===e.fileName&&(c=n.state.fileData.files[e.fileName]);var s=n.state.relatedArtwork[o].column.fileIds.indexOf(c.fileName),u=c;u.familyDisplayIndex=s,O.a.put("/api/artworkInfo/update/".concat(c.fileName),u).then((function(e){i+=1,console.log(i),i===r&&t("file updated")})).catch((function(e){console.log("Record update failed"),console.log(e),a("Record update failed")}))}))})).catch((function(e){console.log("relate see also error"),console.log(e),a(e)}))}))}}))},updateArtworkByFamily:function(e){return new Promise((function(t,a){var o=Object.keys(n.state.relatedArtwork[e].files).length,l=0;o>0?n.state.relatedArtwork[e].column.fileIds.forEach((function(r,i){var c=n.state.relatedArtwork[e].column.fileIds.indexOf(r),s=n.state.familySetupData,u=s.category,m=s.themes,f=s.seeAlso,d=s.familyDescription,g=s.year,y=s.location,h=n.state.relatedArtwork[e].files[r];delete h.__v,delete h._id,delete h.relatedArtwork,h=Object(p.a)(Object(p.a)({},h),{},{familyDisplayIndex:c,category:u,themes:m,seeAlso:f,familyDescription:d,year:g,location:y}),console.log("fileData"),console.log(h),O.a.put("/api/artworkInfo/update/".concat(r),h).then((function(e){l+=1,console.log("progress: ".concat(l,"/").concat(o)),l===o&&t()})).catch((function(e){console.log("error"),console.log(e),a(e)}))})):t()}))},postArtworkInfo:function(e){return console.log("post artwork info RUNS with"),console.log(e),n.setState({showModal:!0}),new Promise((function(t,a){n.state.serverFileDir.includes(e.fileName)&&a('A file with the same name has been registered before. To update it, select "EDIT" tab'),(!e.category||!Object.keys(e.category).length>0)&&a("To submit, select categories for this file");var o=e.artworkFamily||"none",l=n.state.relatedArtwork[o].column.fileIds.indexOf(e.fileName),r=null;if(n.state.serverFileDir.includes(e.fileName))a("file ".concat(e.fileName," already exists on the server. Choose a different name, file, or edit records"));else{var i=(r=n.state.fileData.files[e.fileName]).fileName.slice(0,r.fileName.indexOf(".")),c=r.fileName.slice(r.fileName.indexOf("."),r.fileName.length),s={category:r.category?r.category:null,displayTriggers:r.displayTriggers,filePath:"uploads/".concat(r.fileName),thumbnailPath:"uploads/thumbnails/".concat(i,"-thumbnail").concat(c),mobilePath:"uploads/mobile/".concat(i,"-mob").concat(c),desktopPath:"uploads/desktop/".concat(i,"-desktop").concat(c),fileName:r.fileName,fileType:r.fileType,artworkFamily:o||null,familyDescription:r.familyDescription?r.familyDescription:null,artworkTitle:r.artworkTitle?r.artworkTitle:null,artworkDescription:r.artworkDescription?r.artworkDescription:null,themes:r.themes?r.themes:null,seeAlso:r.seeAlso?r.seeAlso:null,location:r.location?r.location:null,year:r.year?r.year:null,naturalSize:r.naturalSize,displayMain:r.displayMain?r.displayMain:null};s.familyDisplayIndex=l,n.fileDataMethods.relateSeeAlso(e).then((function(o){O.a.post("/api/artworkInfo/create",s).then((function(o){n.fileDataMethods.uploadFile(e.fileName).then((function(a){delete Object(p.a)({},n.state).fileData.files[e.fileName],t("file uploaded")})).catch((function(e){console.log(e),a("error")}))})).catch((function(e){console.log(e),a("error")}))})).catch((function(e){console.log("relateSeeAlso singleFileUpload error"),console.log(e),a(e)}))}}))},initialIndex:function(){var e=Object(p.a)({},n.state);n.state.fileData.column.fileIds.forEach((function(e,t){n.state.fileData.files[e].familyDisplayIndex=t})),n.setState(e)},relateSeeAlso:function(e){var t=e.fileName;console.log("relate see also init _____________________________________"),console.log(e);var a=function(e){var t=new Set(e);return t=Object(h.a)(t)};return new Promise((function(o,l){O.a.get("/api/artworkInfo/fileName/".concat(t)).then((function(r){var i=Object(p.a)({},n.state),c=a(r.data[0].seeAlso),s=a(e.seeAlso),u=s.filter((function(e){return!c.includes(e)})),m=c.filter((function(e){return!s.includes(e)})),f=new Promise((function(e,n){var o=0,l=m.length;0===l&&e(),m.forEach((function(r){var c=i.artworkInfoData[r],s=c.seeAlso.filter((function(e){return e!==t}));s=a(s),c.seeAlso=s,O.a.put("/api/artworkInfo/update/".concat(r),c).then((function(t){(o+=1)===l&&e()})).catch((function(e){console.log(e),n()}))}))})),d=new Promise((function(e,n){var o=0,l=u.length;0===l&&e(),u.forEach((function(r){var c=i.artworkInfoData[r],s=[].concat(Object(h.a)(c.seeAlso),[t]);s=a(s),c.seeAlso=s,O.a.put("/api/artworkInfo/update/".concat(r),c).then((function(t){(o+=1)===l&&e()})).catch((function(e){console.log(e),n()}))}))}));console.log("pre Promise all"),Promise.all([f,d]).then((function(e){console.log("Promise All resolve"),o()})).catch((function(e){console.log(e),l()}))})).catch((function(r){console.log("new file");var i=Object(p.a)({},n.state),c=a(e.seeAlso);new Promise((function(e,n){var o=0,l=c.length;0===l&&e(),c.forEach((function(r){var c=i.artworkInfoData[r],s=[].concat(Object(h.a)(c.seeAlso),[t]);s=a(s),c.seeAlso=s,O.a.put("/api/artworkInfo/update/".concat(r),c).then((function(t){(o+=1)===l&&e()})).catch((function(e){console.log(e),n()}))}))})).then((function(e){o("single file see also resolve")})).catch((function(e){l(e)}))}))}))},updateSeeAlso:function(e,t){console.log("newValue"),console.log(e),console.log("Parent"),console.log(t);var a=null,o=Object(p.a)({},n.state);(a=t?o.fileData.files[t]:o.familySetupData).seeAlso.includes(e)?a.seeAlso=a.seeAlso.filter((function(t){return t!==e})):a.seeAlso=[].concat(Object(h.a)(a.seeAlso),[e]),n.setState(o)}},n.familySetupMethods={filterByFamily:function(e,t){var a={};Object.keys(n.state.seeAlsoData.fileList).forEach((function(t){var o=n.state.seeAlsoData.fileList[t];o.artworkFamily===e&&((a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},o.fileName,o))).fileNames=Object.keys(a).map((function(e){return e})))})),n.setState({seeAlsoData:Object(p.a)(Object(p.a)({},n.state.seeAlsoData),{},{renderFiles:a})})},getArtworkInfo:function(){return new Promise((function(e,t){var a=null;O.a.get("/fetchImages").then((function(t){a=(a=t.data).map((function(e){return e.replace("-thumbnail","")})),O.a.get("/api/artworkInfo").then((function(t){var n={},o=[];console.log(),console.log(t.data),a.forEach((function(e){t.data.forEach((function(t){t.fileName!==e||o.includes[e]||(o=[].concat(Object(h.a)(o),[e]),(n=Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e,t)))[e].useFamilySetup=!1)}))})),e(n)}))})).catch((function(e){return t(e)}))}))},resetRenderFiles:function(){var e=n.state;e.seeAlsoData.renderFiles=Object(p.a)(Object(p.a)({},e.seeAlsoData.fileList),{},{fileNames:e.seeAlsoData.renderFiles.fileNames}),n.setState(e)},onChange:function(e,t,a,o){var l;if(n.state.familySetupData[t]&&n.state.familySetupData[t].includes(e)){var r=function(e){if("string"!==typeof n.state.familySetupData[t]){var a=n.state.familySetupData[t].filter((function(t){return t!==e}));return Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},Object(b.a)({},t,a))})}}(e);n.setState(r,(function(){o&&o()}))}else{var i=(l=e,"string"===typeof n.state.familySetupData[t]?Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},Object(b.a)({},t,l))}):Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},Object(b.a)({},t,[].concat(Object(h.a)(n.state.familySetupData[t]),[l])))}));n.setState(i,(function(){o&&o()}))}},isChecked:function(e,t){return"artworkFamily"===e?n.state.familySetupData.artworkFamily===t:!!n.state.familySetupData[e].includes(t)},getFamilySetup:function(e,t,a){return console.log("getFamilySetup runs"),console.log("value"),console.log(e),console.log("fileName"),console.log(a),new Promise((function(t,o){O.a.get("/api/familySetup/".concat(e)).then((function(o){var l={},r=Object(p.a)({},n.state);if(a){l=Object(p.a)({},n.state.fileData.files[a]),Object.keys(o.data).forEach((function(e){l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,o.data[e]))})),r=Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},a,l))})});var i={};i.category=Object.keys(o.data.category);i.subcategory=function(){var e=Object.keys(o.data.category),t=[];return e.forEach((function(e){t=[].concat(Object(h.a)(t),Object(h.a)(Object.keys(o.data.category[e])))})),t}();i.listitems=function(){var e=Object.keys(o.data.category),t=[];return e.forEach((function(e){Object.keys(o.data.category[e]).forEach((function(a){!o.data.category[e][a].length>0||(t=[].concat(Object(h.a)(t),Object(h.a)(o.data.category[e][a])))}))})),t}(),i.themes=o.data.themes,i.year=o.data.year,i.location=o.data.location,r.fileData.files[a].displayTriggers=i}else a||(Object.keys(o.data).forEach((function(e){l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,o.data[e]))})),r=Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:l}));n.familySetupMethods.getRelatedArtwork(e,r).then((function(a){r=Object(p.a)(Object(p.a)({},r),{},{relatedArtwork:Object(p.a)(Object(p.a)({},r.relatedArtwork),{},Object(b.a)({},e,a))});Object.keys(a);n.setState(r,(function(){return t(a)}))}))})).catch((function(e){o(e)}))}))},restoreFamilySetup:function(e){Object(p.a)(Object(p.a)({},n.state),{},{fileData:Object(p.a)(Object(p.a)({},n.state.fileData),{},{files:Object(p.a)(Object(p.a)({},n.state.fileData.files),{},Object(b.a)({},e,{}))})})},useFamilySetup:function(e){var t=Object(p.a)(Object(p.a)({},n.state),{},{familySetupData:Object(p.a)(Object(p.a)({},n.state.familySetupData),{},{useFamilySetup:e})});n.setState(t)},createFamilySetup:function(){console.log("create family setup runs");var e=n.state.familySetupData.artworkFamily,t={category:n.state.familySetupData.category?n.state.familySetupData.category:{},artworkFamily:e,familyDescription:n.state.familySetupData.familyDescription?n.state.familySetupData.familyDescription:"",themes:n.state.familySetupData.themes?n.state.familySetupData.themes:[],relatedArtwork:n.state.familySetupData.relatedArtwork?n.state.familySetupData.relatedArtwork:[],seeAlso:n.state.familySetupData.seeAlso?n.state.familySetupData.seeAlso:[],location:n.state.familySetupData.location?n.state.familySetupData.location:"",year:n.state.familySetupData.year?n.state.familySetupData.year:""};return new Promise((function(e,a){n.state.familySetupData.artworkFamily||a("Please select artwork family or add a new one"),O.a.post("/api/familySetup/create",t).then((function(t){console.log("create fam succes"),console.log(t),e("create fam succes")})).catch((function(e){console.log("create fam failed"),console.log(e),a("create fam failed")}))}))},updateFamilySetup:function(e){var t=n.state.familySetupData.artworkFamily,a={category:n.state.familySetupData.category?n.state.familySetupData.category:{},artworkFamily:t,familyDescription:n.state.familySetupData.familyDescription?n.state.familySetupData.familyDescription:"",themes:n.state.familySetupData.themes?n.state.familySetupData.themes:[],relatedArtwork:n.state.familySetupData.relatedArtwork?n.state.familySetupData.relatedArtwork:[],seeAlso:n.state.familySetupData.seeAlso?n.state.familySetupData.seeAlso:[],location:n.state.familySetupData.location?n.state.familySetupData.location:"",year:n.state.familySetupData.year?n.state.familySetupData.year:""};return new Promise((function(t,o){O.a.put("/api/familySetup/update/".concat(e),a).then((function(a){console.log(a),n.fileDataMethods.updateArtworkByFamily(e).then((function(a){console.log("FIELS UPDATES"),t("Artwork Family ".concat(e," succesfully updated"))})).catch((function(e){console.log("updateArtworkByFamily FAIL"),console.log(e)}))})).catch((function(e){console.log(e),o("Artwork family update failed")}))}))},getRelatedArtwork:function(e,t){var a={};return new Promise((function(n,o){O.a.get("/api/artworkInfo/".concat(e)).then((function(o){o.data.forEach((function(e,t){Object.keys(e).forEach((function(t){a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.fileName,Object(p.a)(Object(p.a)({},a[e.fileName]),{},Object(b.a)({},t,e[t]))))}))})),t.fileData.files&&Object.keys(t.fileData.files).forEach((function(n){t.fileData.files[n].artworkFamily===e&&Object.keys(t.fileData.files[n]).forEach((function(e){a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},n,Object(p.a)(Object(p.a)({},a[n]),{},Object(b.a)({},e,t.fileData.files[n][e]))))}))}));var l=[],r=[];Object.keys(a).forEach((function(e,t){var n=a[e].familyDisplayIndex;n<0||null===n?r.push(e):l[n]=e})),r.forEach((function(e){return l.push(e)})),l=l.filter((function(e){return null!==e||void 0}));var i={files:a,column:{fileIds:l,id:"".concat(e,"-relatedArtworks")},columnOrder:["".concat(e,"-relatedArtworks")]};n(i)}))}))},updateContext:function(e,t){return n.setState(Object(b.a)({},t,e))}},n.verify=function(e){return g.guest?{showModal:!0,verified:!1,modalMessage:e&&e.customMessage?e.customMessage:"You do not have the rights for this action. Log in using admin level account"}:e?e.addNew&&!n.state.familySetupData.artworkFamily?{verfied:!0,showModal:!0,modalMessage:e&&e.customError?e.customError:"Select or add a new artwork family"}:{verified:!0}:e?void 0:{verified:!0}},n.staticState=function(){console.log("write static state runs");var e={},t=new Promise((function(t,a){O.a.get("/api/familySetup").then((function(a){var n=Object.keys(a.data).map((function(e){return a.data[e].artworkFamily}));e.artworkFamilyList=n,console.log("Families loaded"),console.log(a),t()})).catch((function(e){a(e),console.log("family list laod error")}))})),a=new Promise((function(a,n){t.then((function(t){O.a.get("/api/categories").then((function(t){var o=Object.values(t.data).map((function(e){return e.category})),l={};o.forEach((function(e){var a=t.data.find((function(t){return t.category===e}));return l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,Object.keys(a.subcategory)))})),e.categoriesData=t.data,e.categoriesOptionList={},e.categoriesOptionList.data=l;var r=e.artworkFamilyList.length,i=0;e.artworkFamilyList.forEach((function(t){(function(e,t){var a={};return new Promise((function(t,n){O.a.get("/api/artworkInfo/".concat(e)).then((function(n){n.data.forEach((function(e,t){Object.keys(e).forEach((function(t){a=Object(p.a)(Object(p.a)({},a),{},Object(b.a)({},e.fileName,Object(p.a)(Object(p.a)({},a[e.fileName]),{},Object(b.a)({},t,e[t]))))}))}));var o=Object.keys(a).map((function(e){return null}));Object.keys(a).forEach((function(e){a[e].familyDisplayIndex<0?o.push(e):o[a[e].familyDisplayIndex]=e})),o=o.filter((function(e){return null!==e||!1}));var l={files:a,column:{fileIds:o,id:"".concat(e,"-relatedArtworks")},columnOrder:["".concat(e,"-relatedArtworks")]};t(l)}))}))})(t).then((function(n){e.relatedArtwork||(e.relatedArtwork={}),e.relatedArtwork[t]=n,(i+=1)===r&&a()})).catch((function(e){console.log("getrelated artwork err"),console.log(e),n("getrelated artwork err")}))}))})).catch((function(e){console.log("get categories err"),console.log(e),n("get categories err")}))})).catch((function(e){console.log("categories error"),console.log(e),n(e)}))})),n=new Promise((function(t,a){new Promise((function(e,t){var a=null;O.a.get("/fetchImages").then((function(t){a=t.data;var n=t.data.map((function(e){var t=e.substring(0,e.indexOf("-thumbnail")),a=e.substring(e.indexOf("-thumbnail")+"-thumbnail".length);return"".concat(t).concat(a)}));a=n,O.a.get("/api/artworkInfo").then((function(t){var n={},o=[];a.forEach((function(e){t.data.forEach((function(t){t.fileName!==e||o.includes[e]||(o=[].concat(Object(h.a)(o),[e]),(n=Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e,t)))[e].useFamilySetup=!1)}))})),e(n)})).catch((function(e){console.log("getArtworkInfo err"),console.log(e)}))})).catch((function(e){console.log("fetch images err"),console.log(e)}))})).then((function(a){console.log("this.getArtworkInfo res"),console.log(a),e.artworkInfoData=a;var n={};Object.keys(a).forEach((function(e){a[e].displayMain&&(n=Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e,a[e])))}));var o=[];Object.keys(a).forEach((function(e){o=[].concat(Object(h.a)(o),Object(h.a)(a[e].themes))}));var l=new Set(o);l=Array.from(l);var r={},i=Object.keys(a).map((function(e){return a[e]}));l.forEach((function(e){i.forEach((function(t){t.themes.includes(e)&&(r[e]||(r[e]=[]),t.displayTriggers.themes&&t.displayTriggers.themes.includes(e)&&(r[e]=[].concat(Object(h.a)(r[e]),[t.fileName])))}))}));var c={},s=["metal","social","tools","cloud"],u=["celestial body"];Object.keys(n).forEach((function(e){s.forEach((function(t){n[e].themes.includes(t)&&u.forEach((function(t){n[e].themes.includes(t)||(c[e]=n[e])}))}))}));var m=[],f=[],d={},g={};Object.keys(a).forEach((function(e){var t=a[e];t.year&&(m=[].concat(Object(h.a)(m),[t.year]),d[t.year]||(d[t.year]=[]),d=Object(p.a)(Object(p.a)({},d),{},Object(b.a)({},t.year,[].concat(Object(h.a)(d[t.year]),[e])))),t.location&&(f=[].concat(Object(h.a)(f),[t.location]),g[t.location]||(g[t.location]=[]),g=Object(p.a)(Object(p.a)({},g),{},Object(b.a)({},t.location,[].concat(Object(h.a)(g[t.location]),[e]))))})),m=new Set(m),m=Array.from(m).sort(),f=new Set(f),f=Array.from(f).sort();var y={years:d,locations:g};e.yearLocation={years:m,locations:f,visible:y,all:y},e.artworkOnDisplay=c,e.visibleArtwork=n,e.themesOnDisplay=r,t()})).catch((function(e){console.log("getArtworkInfo err"),console.log(e),a(e)}))})),o=new Promise((function(t,a){O.a.get("/fetchimages").then((function(a){e.serverData=a,t()})).catch((function(e){return a(e)}))}));Promise.all([o,a,n]).then((function(t){console.log("_________________________________________________"),console.log(JSON.stringify(e)),O.a.post("/staticState",e).then((function(e){console.log("file writen"),console.log(e)})).catch((function(e){console.log("write staticstate file error"),console.log(e)}))})).catch((function(e){console.log("promise all err"),console.log(e)}))},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log("backend provider mount");var t=Object(p.a)({},this.state);this.setState({showModal:!0});var a=new Promise((function(e,a){O.a.get("/api/themes").then((function(a){t.themesData=a.data.list,e()}))})),n=new Promise((function(e,a){O.a.get("/api/familySetup").then((function(a){var n=Object.keys(a.data).map((function(e){return a.data[e].artworkFamily}));t.artworkFamilyList=n,e()}))})),o=new Promise((function(a,o){n.then((function(n){O.a.get("/api/categories").then((function(n){var o=Object.values(n.data).map((function(e){return e.category})),l={};o.forEach((function(e){var t=n.data.find((function(t){return t.category===e}));return l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},e,Object.keys(t.subcategory)))})),t.categoriesData=n.data,t.categoriesOptionList={},t.categoriesOptionList.data=l,t.artworkFamilyList.forEach((function(a){e.familySetupMethods.getRelatedArtwork(a,t).then((function(e){t.relatedArtwork[a]=e}))})),a()})).catch((function(e){}))}))})),l=new Promise((function(a,n){console.log("artwork info gather runs"),e.familySetupMethods.getArtworkInfo().then((function(e){console.log(e),t.artworkInfoData=e,t.artworkOnDisplay=e,a()}))})),r=new Promise((function(e,a){O.a.get("/fetchImages").then((function(a){var n=a.data.map((function(e){return e.replace("-thumbnail","")}));t.serverFileDir=n,e()}))}));Promise.all([o,l,a,r]).then((function(a){t.showModal=!1,e.setState(t)})).catch((function(e){console.log(e),document.location.reload(!0)}))}},{key:"render",value:function(){return o.a.createElement(Z.Provider,{value:{state:this.state,categoryMethods:this.categoryMethods,onCheck:this.categoryMethods.onCheck,fileDataMethods:this.fileDataMethods,removeFile:this.fileDataMethods.removeFile,uploadFile:this.fileDataMethods.uploadFile,addFileToState:this.fileDataMethods.addFileToState,onDragEnd:this.fileDataMethods.onDragEnd,createFamilySetup:this.familySetupMethods.createFamilySetup,getFamilySetup:this.familySetupMethods.getFamilySetup,useFamilySetup:this.familySetupMethods.useFamilySetup,familySetupMethods:this.familySetupMethods,readImageDir:this.readImageDir,changeFileName:this.changeFileName,onChange:this.onChange,verify:this.verify,addNew:this.addNew,deleteTheme:this.deleteTheme,staticState:this.staticState,inputFamilyDescription:this.inputFamilyDescription}},this.props.children)}}]),a}(o.a.Component),ee=a(121),te=a(239),ae=a(238),ne=function(e){e.fileName?e.context.state.fileData.files[e.fileName]:e.context.state.familySetupdata;var t=function(t){return new Promise((function(a,n){var o=t.category,l=t.subcategory,r=t.listitem,i=e.context.state.categoriesData.find((function(e){return e.category===o})),c=null;if(l){var s=i.subcategory[l];c=Object(p.a)(Object(p.a)({},i),{},{subcategory:Object(p.a)(Object(p.a)({},i.subcategory),{},Object(b.a)({},l,s))}),r?c.subcategory[l]=s.filter((function(e){return e!==r})):delete c.subcategory[l]}e.context.categoryMethods.deleteCategory(o,c,t).then((function(e){e.modalMessage=e.modalMessage,e.confirm=!1,a(e)})).catch((function(e){e.modalMessage="Action failed",e.confirm=!1,n(e)}))}))},a=function(t){return e.context.state.categoriesOptionList&&e.context.state.categoriesOptionList.DOM?e.context.state.categoriesOptionList.DOM[t]:null};return o.a.createElement("div",{className:"list--container"},e.context.state.categoriesData.map((function(a){var n=null;return a.subcategory&&(n=Object.keys(a.subcategory).map((function(n){var l=a.subcategory[n].map((function(l,r){return o.a.createElement("li",{key:"".concat(l).concat(r,"}"),className:"list--listitem list-group-item themes-list\n                            ".concat(e.context.categoryMethods.autoCheckCategories(e.fileName,a.category,n,l)?"themes-list--selected":null)},e.allowDelete?o.a.createElement("div",{className:"themes-list-delete",key:"categories-delete-".concat(a.category,"-").concat(n,"-").concat(l),onClick:function(){e.modalInvoke({requireActionConfirm:!0,confirmedAction:function(){return t({category:a.category,subcategory:n,listitem:l})},modalMessage:o.a.createElement("span",null,"Delete list item ",o.a.createElement("strong",null,l)," from ",o.a.createElement("strong",null,n)," subcategory in ",o.a.createElement("strong",null,a.category)," category?")})}},o.a.createElement("img",{alt:"delete icon",src:"/icons/close-round-line.png"})):null,o.a.createElement("label",{htmlFor:"filters-".concat(a.category,"-").concat(n,"-").concat(l)},l),o.a.createElement("input",{id:"filters-".concat(a.category,"-").concat(n,"-").concat(l),className:"navigation-input listitem",type:"checkbox",value:l,onChange:function(t){return e.context.onCheck(t,e.fileName)},checked:e.context.categoryMethods.autoCheckCategories(e.fileName,a.category,n,l)}))}));return o.a.createElement("ul",{key:n,id:n,className:"list--subcategory list-group list-group-item"},o.a.createElement("div",{className:e.context.categoryMethods.autoCheckCategories(e.fileName,a.category,n)?"themes-list--selected themes-list ":"themes-list "},e.allowDelete?o.a.createElement("div",{className:"themes-list-delete",key:"categories-delete-".concat(a.category,"-").concat(n),onClick:function(){e.modalInvoke({requireActionConfirm:!0,confirmedAction:function(){return t({category:a.category,subcategory:n})},modalMessage:o.a.createElement("span",null,"Delete ",o.a.createElement("strong",null,n)," subcategory from ",o.a.createElement("strong",null,a.category)," category?")})}},o.a.createElement("img",{alt:"delete icon",src:"/icons/close-round-line.png"})):null,o.a.createElement("label",{htmlFor:"filters-".concat(a.category,"-").concat(n)},n),o.a.createElement("input",{id:"filters-".concat(a.category,"-").concat(n),className:"navigation-input subcategory",type:"checkbox",value:n,onChange:function(t){return e.context.onCheck(t,e.fileName)},checked:e.context.categoryMethods.autoCheckCategories(e.fileName,a.category,n)})),l)}))),o.a.createElement("div",{key:a.category,className:"list-group"},o.a.createElement("ul",{id:a.category,className:"list--category"},o.a.createElement("div",{className:e.context.categoryMethods.autoCheckCategories(e.fileName,a.category)?"themes-list--selected themes-list":"themes-list"},e.allowDelete?o.a.createElement("div",{className:"themes-list-delete",key:"categories-delete-".concat(a.category),onClick:function(){console.log("CLICKED DELETE CATEGORY"),e.modalInvoke({requireActionConfirm:!0,confirmedAction:function(){return t({category:a.category})},modalMessage:o.a.createElement("span",null,"Delete ",o.a.createElement("strong",null,a.category)," category?")})}},o.a.createElement("img",{alt:"delete icon",src:"/icons/close-round-line.png"})):null,o.a.createElement("label",{htmlFor:"filters-".concat(a.category)},a.category),o.a.createElement("input",{id:"filters-".concat(a.category),className:"navigation-input category",type:"checkbox",value:a.category,onChange:function(t){return e.context.onCheck(t,e.fileName)},checked:e.context.categoryMethods.autoCheckCategories(e.fileName,a.category)})),n))})),e.addNew?o.a.createElement("div",{className:"categories--addNew_container"},o.a.createElement("h5",{className:"navigation--addNew_title"},"add new category"),o.a.createElement("div",{className:"navigation--addNew"},o.a.createElement("input",{className:"categories-input",type:"text",list:"datalist-add-categories",name:"add-category",id:"add-category",placeholder:"category",onFocus:e.context.categoryMethods.getCategoryNames}),o.a.createElement("datalist",{id:"datalist-add-categories"},a("categories")),o.a.createElement("input",{className:"categories-input",type:"text",list:"datalist-add-subcategories",name:"add-subcategory",id:"add-subcategory",placeholder:"subcategory",onFocus:e.context.categoryMethods.getSubcategoryNames}),o.a.createElement("datalist",{id:"datalist-add-subcategories"},a("subCategories")),o.a.createElement("input",{className:"categories-input",type:"text",name:"add-listitem",id:"add-listitem",placeholder:"listitem"}),o.a.createElement(X.a,{className:"custom-button",variant:"success",size:"sm",onClick:function(){console.log("SUBMIT CATEGORIES UPDATE"),e.modalInvoke(null,e.context.categoryMethods.updateCategory())}},"SUBMIT"))):null)},oe=function(e){var t=function(t,a,n){return e.familySetup,"category"===t||"subcategory"===t||"listitems"===t||"themes"===t&&a.displayTriggers&&a.displayTriggers[t]?!!a.displayTriggers&&a.displayTriggers[t].includes(n):void 0};return o.a.createElement("div",{className:"displayTrigger-wrapper"},o.a.createElement("p",{className:"displayTrigger-title"},e.title),o.a.createElement("ul",null,function(a,n,l,r){if(n&&!(n.length<=0))return n.map((function(n){if(""!==n&&" "!==n)return o.a.createElement("li",{key:"trigger-".concat(a,"-").concat(n),className:"themes-list ".concat(t(e.title,e.file,n)?"themes-list--selected":"")},o.a.createElement("label",{htmlFor:"displayTriggers-".concat(a,"-").concat(n)},n),o.a.createElement("input",Object(b.a)({id:"displayTriggers-".concat(a,"-").concat(n),type:"checkbox",onChange:function(){},checked:t(e.title,e.file,n)},"onChange",(function(){return e.onChange(n,a,l,r)}))))}))}(e.title,e.data,e.file.fileName,e.familySetup)))},le=function(e){return o.a.createElement("div",{className:"imageInfo--box"},o.a.createElement("div",{className:"displayTrigger-container"},o.a.createElement("p",{className:"displayTrigger-title"},"Display triggers"),o.a.createElement(oe,{title:"category",data:Object.keys(e.file.category),file:e.file,familySetup:e.familySetup,onChange:e.context.fileDataMethods.onChangeDisplayTriggers}),o.a.createElement(oe,{title:"subcategory",data:function(e){var t=Object.keys(e.category),a=[];return t.forEach((function(t){a=[].concat(Object(h.a)(a),Object(h.a)(Object.keys(e.category[t])))})),a}(e.file),file:e.file,familySetup:e.familySetup,onChange:e.context.fileDataMethods.onChangeDisplayTriggers}),o.a.createElement(oe,{title:"listitems",data:function(e){var t=Object.keys(e.category),a=[];return t.forEach((function(t){Object.keys(e.category[t]).forEach((function(n){!e.category[t][n].length>0||(a=[].concat(Object(h.a)(a),Object(h.a)(e.category[t][n])))}))})),a}(e.file),file:e.file,familySetup:e.familySetup,onChange:e.context.fileDataMethods.onChangeDisplayTriggers}),o.a.createElement(oe,{title:"themes",data:e.file.themes,file:e.file,familySetup:e.familySetup,onChange:e.context.fileDataMethods.onChangeDisplayTriggers}),o.a.createElement("div",{className:"displayTrigger-wrapper"},o.a.createElement("p",{className:"displayTrigger-title"},"Year/Location"),o.a.createElement("ul",null,e.file.year?o.a.createElement("li",{key:"trigger-year",className:"themes-list ".concat(e.file.displayTriggers&&e.file.displayTriggers.year===e.file.year?"themes-list--selected":"")},o.a.createElement("span",null,e.file.year),o.a.createElement("input",{type:"checkbox",checked:e.file.displayTriggers&&e.file.displayTriggers.year===e.file.year||!1,onChange:function(){return e.context.fileDataMethods.onChangeDisplayTriggers(e.file.year,"year",e.file.fileName,e.familySetup)}})):null,e.file.location?o.a.createElement("li",{key:"trigger-location",className:"themes-list ".concat(e.file.displayTriggers&&e.file.displayTriggers.location===e.file.location?"themes-list--selected":"")},o.a.createElement("span",null,e.file.location),o.a.createElement("input",{type:"checkbox",checked:e.file.displayTriggers&&e.file.displayTriggers.location===e.file.location||!1,onChange:function(){return e.context.fileDataMethods.onChangeDisplayTriggers(e.file.location,"location",e.file.fileName,e.familySetup)}})):null))))},re=function(e){return o.a.createElement("div",{className:"imageInfo--box",style:{display:"block"}},o.a.createElement("div",{className:"yearLocation-wrapper"},o.a.createElement("label",{className:"yearLocation-label",htmlFor:"filters-location"},"location:"),o.a.createElement("input",{className:"yearLocation-input",id:"filters-location",type:"text",value:e.location?e.location:"",onChange:function(t){e.context.onChange(t,"location",e.fileName)}})),o.a.createElement("div",{className:"yearLocation-wrapper"},o.a.createElement("label",{className:"yearLocation-label",htmlFor:"filters-year"},"year:"),o.a.createElement("input",{className:"yearLocation-input",id:"filters-year",type:"number",value:e.year?e.year:"",onChange:function(t){e.context.onChange(t,"year",e.fileName)}})))},ie=a(114),ce=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={setShow:!1,show:!1,saveButtonText:"Save Changes",spinnerDisplay:"d-none",saveButtonDisable:!1},n.handleClose=function(){return n.setState({setShow:!1,show:!1,saveButtonText:"Save Changes",spinnerDisplay:"d-none",saveButtonDisable:!1})},n.handleShow=function(e){e.preventDefault(),n.setState({setShow:!0,show:!0,modalMessage:o.a.createElement("span",null,"Add ",o.a.createElement("em",null,document.getElementById("add-".concat(n.props.stateKey,"-item")).value)," to ",o.a.createElement("em",null,n.props.stateKey),"?")})},n.changeButtonText=function(e){n.setState({spinnerDisplay:"d-none",saveButtonText:"Done",saveButtonDisable:!0,modalMessage:e})},n.verify=function(){var e=n.context.verify();return!!e.verified||(n.setState(Object(p.a)({},e)),!1)},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(Z.Consumer,null,(function(){return e.props.addNew?o.a.createElement("div",{className:"addNew-container"},o.a.createElement("form",{id:"formFor-".concat(e.props.stateKey),action:e.props.router,onSubmit:e.handleShow,className:"addNew-form"},o.a.createElement("label",{htmlFor:"add-".concat(e.props.stateKey,"-item")},e.props.addNewTitle?e.props.addNewTitle:"Add new ".concat(e.props.stateKey),":"),o.a.createElement("div",null,o.a.createElement("input",{className:"addNew-input",type:"text",id:"add-".concat(e.props.stateKey,"-item")}),o.a.createElement(X.a,{variant:"success",size:"sm",type:"submit",form:"formFor-".concat(e.props.stateKey),className:"button-extend addNew-button"},"SUBMIT"))),o.a.createElement(V.a,{show:e.state.show,onHide:e.handleClose},o.a.createElement(V.a.Header,{closeButton:!0},o.a.createElement(V.a.Title,null,"Add to ",e.props.stateKey)),o.a.createElement(V.a.Body,null,e.state.modalMessage),o.a.createElement(V.a.Footer,null,o.a.createElement(X.a,{variant:"secondary",onClick:e.handleClose},"Close"),o.a.createElement(X.a,{style:{transition:"0.2s all"},disabled:e.state.saveButtonDisable,variant:"primary",onClick:function(t){e.setState({saveButtonText:"",spinnerDisplay:"d-block"}),e.context.addNew(t,"add-".concat(e.props.stateKey,"-item"),e.props.router,e.props.requestKey,e.props.stateKey,e.changeButtonText).then((function(t){e.setState({modalMessage:"Success.",saveButtonText:"Done",spinnerDisplay:"d-none",saveButtonDisable:!0})})).catch((function(t){e.setState({modalMessage:"Action Failed.",saveButtonText:"Done",spinnerDisplay:"d-none",saveButtonDisable:!0})}))}},e.state.saveButtonText,o.a.createElement(ie.a,{style:{height:"20px",width:"20px",borderWidth:"2px"},animation:"border",variant:"purple",className:e.state.spinnerDisplay}))))):null}))}}]),a}(o.a.Component);ce.contextType=Z;var se=ce,ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).deletePromise=function(e,t){return new Promise((function(a,o){"themes"!==e?o():(console.log("initiate context.deleteTheme"),n.props.context.deleteTheme(t).then((function(e){return a()})).catch((function(e){return o()})))}))},n.createDropDownList=function(e,t,a,l){var r=a.familySetupData;l&&(r=a.fileData.files[l]);var i=function(e,t){if(!n.props.uncontrolled){if(n.props.highlighted){return!(!n.props.highlighted[e]||!n.props.highlighted[e].includes(t))}return!!r[e]&&(!!r[e]&&("string"===typeof r[e]?r[e]===t:Array.isArray(r[e])?r[e].includes(t):void 0))}},c=[];e.forEach((function(e){c.includes(e[0].toUpperCase())||(c=[].concat(Object(h.a)(c),[e[0].toUpperCase()]))}));var s={};c.sort().forEach((function(t){Object.keys(c).includes(t)&&(s[t]=[]),s[t]=e.filter((function(e){return e[0].toUpperCase()===t.toUpperCase()}))}));return Object.keys(s).map((function(e){return o.a.createElement("div",{key:"dropdown-".concat(t,"-").concat(e),className:"dropdown-container"},o.a.createElement("p",{className:"dropdown-headline"},e.toUpperCase()),o.a.createElement("ul",null,s[e].sort().map((function(e){return a=e,o.a.createElement("li",{className:"themes-list ".concat(i(t,a)?"themes-list--selected":null),key:"".concat(t,"-").concat(a)},n.props.allowDelete?o.a.createElement("div",{className:"themes-list-delete",key:"dropdown-".concat(t,"-delete-").concat(a),onClick:function(){n.props.modalInvoke({requireActionConfirm:!0,confirmedAction:function(){return new Promise((function(e,o){n.deletePromise(t,a).then((function(t){return e({confirm:!1,modalMessage:"Theme deleted."})})).catch((function(e){return o({confirm:!1,modalMessage:"Theme delete failed."})}))}))},modalMessage:o.a.createElement("span",null,"Delete ",o.a.createElement("strong",null,a)," ",t,"?")})}},o.a.createElement("img",{alt:"delete icon",src:"/icons/close-round-line.png"})):null,o.a.createElement("label",{htmlFor:"".concat(t,"-").concat(a,"-").concat(n.props.fileName||n.props.parent),className:"themes-span"},a),n.props.uncontrolled?o.a.createElement("input",{id:"".concat(t,"-").concat(a,"-").concat(n.props.fileName||n.props.parent),className:"themes-checkbox",type:n.props.checkbox?"checkbox":"radio",value:a,name:t,onChange:function(e){n.props.onChange(e.target.value,t,l)}}):o.a.createElement("input",{id:"".concat(t,"-").concat(a,"-").concat(n.props.fileName||n.props.parent),className:"themes-checkbox",type:n.props.checkbox?"checkbox":"radio",value:a,name:t,checked:i(t,a),onChange:function(e){n.props.onChange(e.target.value,t,l)}}));var a}))))}))},n.state={category:{}},n}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"grid-wrapper"},this.createDropDownList(this.props.array,this.props.string,this.props.state,this.props.fileName),o.a.createElement(se,{addNew:this.props.addNew,addNewTitle:this.props.addNewTitle,router:this.props.router,stateKey:this.props.addNewTarget,requestKey:this.props.requestKey}))}}]),a}(o.a.Component),me=function(e){return o.a.createElement(ue,{title:"Select Family Themes",context:e.context,state:e.context.state,array:e.dataArray,onChange:e.onChange,isChecked:e.isChecked,checkbox:!0,fileName:e.fileName,string:"themes",id:"Themes-list",router:"/api/themes/update",addNewTarget:"themesData",addNew:e.addNew,addNewTitle:"Add new Theme",requestKey:"list",allowDelete:e.allowDelete,modalInvoke:e.modalInvoke})},fe=function(e){var t=e.fileName?e.context.state.fileData.files[e.fileName]:e.context.state.familySetupData,a=e.fileName?e.context.fileDataMethods.onChange:e.context.familySetupMethods.onChange;return o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{defaultActiveKey:"categories",transition:!1,id:"noanim-tab-example"},o.a.createElement(ae.a,{eventKey:"categories",title:"Categories"},o.a.createElement(ne,{context:e.context,fileName:t.fileName?t.fileName:null,modalInvoke:e.modalInvoke,allowDelete:e.allowCategoriesDelete})),o.a.createElement(ae.a,{eventKey:"displayTriggers",title:"Display Triggers"},o.a.createElement(le,{file:t,context:e.context,familySetup:!t.fileName})),o.a.createElement(ae.a,{eventKey:"themes",title:"Themes"},o.a.createElement(me,{context:e.context,dataArray:e.context.state.themesData,onChange:a,fileName:t.fileName?t.fileName:null,modalInvoke:e.modalInvoke,allowDelete:e.allowThemesDelete})),o.a.createElement(ae.a,{eventKey:"yearAndLocation",title:"Year and Location"},o.a.createElement(re,{year:t.year,location:t.location,context:e.context,fileName:t.fileName?t.fileName:null}))))},de=function(e){var t=e.fileName?e.context.state.fileData.files[e.fileName]:e.context.state.familySetupData;return o.a.createElement("div",{className:"imageInfo--box familyDescription",style:{display:"block"}},o.a.createElement("div",null,o.a.createElement("p",null,"Family description:"),o.a.createElement("p",{className:"subtitle"},"this description will appear on each item in the artwork family")),o.a.createElement("textarea",{id:"input_familyDescription",value:t.familyDescription||"",onChange:function(t){var a=t.target.value;e.context.inputFamilyDescription(a)},style:{width:"100%"}}),o.a.createElement("div",{style:{border:"1px solid "}},o.a.createElement("p",null,"preview"),o.a.createElement("div",{style:{border:"1px solid black"}},t.familyDescription&&t.familyDescription?o.a.createElement("div",null,T()(t.familyDescription)):"")))},ge=function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"imageInfo--box"},o.a.createElement("div",null,o.a.createElement("p",null,"Add Artwork title:"),o.a.createElement("p",{className:"subtitle"},"(different from family name):")),o.a.createElement("input",{value:e.file.artworkTitle||"",type:"text",onChange:function(t){return e.context.onChange(t,"artworkTitle",e.file.fileName)}})),o.a.createElement("div",{className:"imageInfo--box"},o.a.createElement("span",null,"display on main page:"),o.a.createElement("form",{className:"artworkinfo--form"},o.a.createElement("div",{className:"container-radio"},o.a.createElement("label",{htmlFor:"mainDisplayIndex_yes"},"yes"),o.a.createElement("input",{type:"radio",checked:e.state.fileData.files[e.file.fileName].displayMain,name:"mainDisplayIndex",id:"mainDisplayIndex__yes",value:"yes",onChange:function(t){e.onChange(t,"displayMain",e.file.fileName)}})),o.a.createElement("div",{className:"container-radio"},o.a.createElement("label",{htmlFor:"mainDisplayIndex_no"},"no"),o.a.createElement("input",{checked:!e.state.fileData.files[e.file.fileName].displayMain,type:"radio",name:"mainDisplayIndex",id:"mainDisplayIndex__no",value:"no",onChange:function(t){e.onChange(t,"displayMain",e.file.fileName)}})))),o.a.createElement("div",{className:"imageInfo--box"}),o.a.createElement("div",{className:"imageInfo--box",style:{display:"block"}},o.a.createElement("div",null,o.a.createElement("p",null,"Artwork description:"),o.a.createElement("p",{className:"subtitle"},"this is describes particulars of a work in a series or exhibit in a show")),o.a.createElement("textarea",{value:e.file.artworkDescription||"",onChange:function(t){return e.context.onChange(t,"artworkDescription",e.file.fileName)},style:{width:"100%"}})))},ye=a(40),pe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fileContainer=function(e,t){var a=t.filePath?t.mobilePath:t.preview;return e.match("image")?o.a.createElement("img",{className:"ImagesPreview--image",alt:t.fileName,src:"/".concat(a)}):e.match("video")?o.a.createElement("video",{className:"ImagesPreview--image",controls:!0},o.a.createElement("source",{src:a,type:e}),"Your browser does not support the video tag."):e.match("audio")?o.a.createElement("audio",{className:"ImagesPreview--image",controls:!0},o.a.createElement("source",{src:a,type:e}),"Your browser does not support the audio tag."):e.match("application/pdf")?o.a.createElement("iframe",{src:a,style:{width:"100%"}}):void 0},n}return Object(c.a)(a,[{key:"render",value:function(){return this.props.noWrapper?this.fileContainer(this.props.file.fileType,this.props.file):o.a.createElement("div",{className:"ImagesPreview--imageContainer"},this.fileContainer(this.props.file.fileType,this.props.file))}}]),a}(o.a.Component),he=function(e){var t;return o.a.createElement("div",{className:"imageBox__wrapper ".concat(e.customClass?e.customClass:""," ").concat((t=e.file.fileName,e.directory&&e.directory.includes(t)?"themes-list--selected":"notSelected"))},o.a.createElement(pe,{file:e.file}),o.a.createElement("div",{className:"imageBox__text"},o.a.createElement("div",{className:""},o.a.createElement("p",{className:"title"},"File Name:"),o.a.createElement("p",null,e.file.fileName)),o.a.createElement("div",null,o.a.createElement("p",{className:"title"},"Artwork Family:"),o.a.createElement("p",null,e.file.artworkFamily)),e.children))},be=function(e){return e.file?o.a.createElement(ye.b,{draggableId:e.file.fileName,index:e.index},(function(t){return o.a.createElement("div",Object.assign({className:"draggable-container"},t.draggableProps,{ref:t.innerRef}),o.a.createElement("div",Object.assign({},t.dragHandleProps,{onMouseDown:function(e){var a=e.target;e.target.classList.contains("mouseDown")||e.target.classList.add("mouseDown"),t.dragHandleProps.onMouseDown(e),document.addEventListener("mouseup",(function(){a.classList.remove("mouseDown")}))}}),o.a.createElement("div",{className:"image-index-box"},o.a.createElement(pe,{file:e.file}),o.a.createElement("div",{className:"draggable--index"},o.a.createElement("div",null,e.relatedArtwork.column.fileIds.indexOf(e.file.fileName))))))})):null},ve=function(e){return o.a.createElement(ye.c,{droppableId:"".concat(e.artworkFamily,"-relatedArtworks")},(function(t){var a=e.column.fileIds;return o.a.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps,{className:"DnDfilesList"}),a.map((function(t,a){return o.a.createElement(be,{key:"".concat(t,"-in-").concat(e.column.id,"-").concat(a,"-familyList"),file:e.files[t],columnId:e.column.id,index:a,relatedArtwork:e})})),t.placeholder)}))},Oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).createDroppable=function(){return o.a.createElement(ve,{key:n.props.data.column.id,column:n.props.data.column,files:n.props.data.files,columnIndex:0,fileName:n.props.file.fileName,artworkFamily:n.props.file.artworkFamily})},n.state=null,n}return Object(c.a)(a,[{key:"render",value:function(){return this.props.data?o.a.createElement(ye.a,{onDragEnd:this.context.fileDataMethods.onDragEndFamilyList},this.props.data?this.createDroppable():null):null}}]),a}(o.a.Component);Oe.contextType=Z;var ke=function(e){var t=function(t){return!!e.directory&&e.directory.includes(t)};return o.a.createElement(he,{file:e.file,directory:e.directory},o.a.createElement("div",{style:{border:"1px solid grey",padding:"2px"}},o.a.createElement("p",{style:{fontSize:"10px"}},"use as See Also recommendation"),o.a.createElement("form",{style:{display:"flex",justifyContent:"space-evenly"}},o.a.createElement("div",{className:"container-radio"},o.a.createElement("input",{type:"radio",name:"useAsSeeAlso",id:"".concat(e.file.fileName,"-useAsSeeAlso__radio-yes"),value:"yes",onChange:function(t){e.onChange(e.file.fileName,e.parent)},checked:t(e.file.fileName)}),o.a.createElement("label",{htmlFor:"useAsSeeAlso_yes",id:"useAsSeeAlso_yes"},"yes")),o.a.createElement("div",{className:"container-radio"},o.a.createElement("input",{type:"radio",name:"useAsSeeAlso",id:"".concat(e.file.fileName,"-useAsSeeAlso__radio-no"),value:"no",onChange:function(t){e.onChange(e.file.fileName,e.parent)},checked:!t(e.file.fileName)}),o.a.createElement("label",{htmlFor:"useAsSeeAlso_no"},"no")))))},Ee=function(e){return o.a.createElement(ue,{title:"Select Artwork Family",parent:e.parent,state:e.context.state,array:e.context.state.artworkFamilyList,onChange:e.onChange||e.context.getFamilySetup,uncontrolled:e.uncontrolled,checkbox:!e.radio,fileName:e.fileName,string:"artworkFamily",id:"List-of-artwork-families",highlighted:e.highlighted,router:"/api/familySetup/create",addNewTarget:"artworkFamilyList",addNew:e.addNew,addNewTitle:"Add new Artwork Family name",requestKey:"artworkFamily"})},we=a(240),je=a(241),De=function(e){return o.a.createElement(we.a,null,o.a.createElement(je.a,null,o.a.createElement(je.a.Header,null,o.a.createElement(we.a.Toggle,{style:{fontWeight:"600"},as:X.a,variant:"link",eventKey:"0",className:e.className},e.title)),o.a.createElement(we.a.Collapse,{id:e.collapseId,eventKey:"0"},o.a.createElement(je.a.Body,null,e.children))))},Ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).renderContainer=function(e){var t=Object.keys(e).filter((function(e){return e!==n.props.parent.fileName})).map((function(t){return o.a.createElement(ke,{key:"seeAlso-".concat(t),file:e[t],directory:n.props.directory,onChange:n.props.context.fileDataMethods.updateSeeAlso,parent:n.props.parent.fileName})}));return o.a.createElement("div",{className:"admin-seeAlso-container grid-wrapper"},t)},n.filterByFamily=function(e,t,a){console.log("filter family runs");var o=Object(p.a)({},n.state);if(t){var l=Object(p.a)({},n.state.fileList);Object.keys(n.state.fileList).length===Object.keys(n.state.allFiles).length&&(l={});var r=n.state.allFiles,i=Object.keys(n.state.allFiles);o.highlighted[a]||(o.highlighted[a]=[]);var c=o.highlighted[a];return i.forEach((function(t){if(r[t].artworkFamily===e){var a=r[t];l=Object(p.a)(Object(p.a)({},l),{},Object(b.a)({},t,a)),c=[].concat(Object(h.a)(c),[t])}})),o.fileList=l,o.highlighted[a]=c,console.log(o.highlighted),n.setState(o)}var s,u=n.state.fileList,m=Object.keys(n.state.fileList),f={};return m.forEach((function(t){var a=u[t];a.artworkFamily!==e&&(f=Object(p.a)(Object(p.a)({},f),{},Object(b.a)({},t,a)))})),o.fileList=f,s=m.filter((function(t){return u[t].artworkFamily!==e})),console.log("newState.highlighted[string]"),console.log(s),n.setState(o)},n.reloadAll=function(){n.setState({fileList:n.state.allFiles})},n.state={highlighted:{artworkFamily:[]},fileList:n.props.initialData,allFiles:n.props.initialData},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({fileList:this.props.initialData,allFiles:this.props.initialData})}},{key:"render",value:function(){var e=this;return o.a.createElement(n.Fragment,null,o.a.createElement(De,{title:"filter by family"},o.a.createElement(Ee,{context:this.props.context,onChange:this.filterByFamily,checkbox:!0,highlighted:this.state.highlighted}),o.a.createElement(X.a,{onClick:function(){e.reloadAll()}},"reload all")),this.renderContainer(this.state.fileList))}}]),a}(o.a.Component),xe=(o.a.Component,function(e){return o.a.createElement("div",{className:"themeSelector"},o.a.createElement(De,{title:"Select Artwork Family"},o.a.createElement(Ee,{context:e.context,addNew:e.addNew,parent:"EditFamilyInfo",fileName:e.fileName,uncontrolled:e.unconctrolled,radio:!0})),o.a.createElement(de,{context:e.context,fileName:e.fileName}))}),Se=function(e){return o.a.createElement("div",{className:"EditDetailContainer--button-wrapper"},o.a.createElement(m.b,{to:"/admin/edit/".concat(e.file.fileName)},o.a.createElement(X.a,{onClick:function(t){e.context.fileDataMethods.serverFileToState(e.file).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},"Edit")),o.a.createElement(X.a,{className:"delete-button",onClick:function(){e.onModalClick(e.file.fileName)}},"Delete"))},Ie=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){n.setState({showModal:!1,modalConfirm:!0})},n.verify=function(){var e=n.props.context.verify();return console.log("result"),console.log(e),!!e.verified||(n.setState(Object(p.a)({},e)),!1)},n.EditDetail=function(e){return o.a.createElement(ke,{key:"seeAlso-".concat(e.fileName),file:e,directory:n.props.directory,onChange:n.props.context.fileDataMethods.updateSeeAlso,parent:n.props.parent.fileName})},n.filterByFamily=function(e){var t={},a=n.state.allFiles;Object.keys(n.state.allFiles).forEach((function(n){if(a[n].artworkFamily===e){var o=a[n];t=Object(p.a)(Object(p.a)({},t),{},Object(b.a)({},n,o))}})),n.setState({fileList:t},(function(){console.log("filter done"),console.log(n.state)}))},n.reloadAll=function(){n.setState({fileList:n.state.allFiles})},n.state={showModal:!1,modalMessage:null,modalConfirm:!0,fileList:n.props.context.state.artworkInfoData,allFiles:n.props.context.state.artworkInfoData},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({fileList:this.props.context.state.artworkInfoData})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"familyContainer-seeAlso",className:"EditDetailContainer"},o.a.createElement("div",{className:"familyPicker"},o.a.createElement("button",{className:"btn-sm btn-primary familyPicker-reload",onClick:this.reloadAll},"reload file list"),o.a.createElement(De,{title:"filter by family"},o.a.createElement(Ee,{context:this.props.context,onChange:this.filterByFamily}))),o.a.createElement("div",{className:"grid-wrapper"},Object.keys(this.state.fileList).map((function(t){return e.EditDetail(e.props.context.state.artworkInfoData[t])}))))}}]),a}(o.a.Component),Ce=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){n.setState({showModal:!1})},n.verify=function(){var e=n.props.context.verify();return!!e.verified||(n.setState(Object(p.a)({},e)),!1)},n.state={submitButtons:null,showModal:null,modalMessage:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"FileInfo-container SingleFile-container"},o.a.createElement("div",{className:"FileInfo-preview"},o.a.createElement(he,{customClass:"FileInfo-imageBox",file:this.props.file}),o.a.createElement("div",{className:"FamilyList--submit-delete-container"},o.a.createElement(X.a,{variant:"danger",className:"custom-button",onClick:function(){return e.props.context.fileDataMethods.removeFile(e.props.file.fileName,e.props.artworkFamily)}},"Remove"),o.a.createElement(X.a,{variant:"success",className:"custom-button",onClick:function(){var t=e.props.context.verify();if(!t.verified)return e.setState({showModal:!0,modalMessage:t.modalMessage});e.setState({showModal:!0,modalMessage:"loading..."}),e.props.context.fileDataMethods.postArtworkInfo(e.props.file).then((function(t){e.setState({modalMessage:t})})).catch((function(t){e.setState({modalMessage:t})}))}},"Submit to server"))),o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{defaultActiveKey:"artworkInfo",transition:!1,id:"".concat(this.props.file.fileName,"-fileUpdate")},o.a.createElement(ae.a,{eventKey:"artworkInfo",title:"Edit Artwork Info"},o.a.createElement(ge,{file:this.props.file,fileName:this.props.file.fileName,onChange:this.props.context.fileDataMethods.onChange,state:this.props.context.state,context:this.props.context})),o.a.createElement(ae.a,{eventKey:"familyInfo",title:"Edit Artwork Family Info"},o.a.createElement("h3",null,this.props.file.fileName),o.a.createElement(xe,{context:this.props.context,fileName:this.props.file.fileName,uncontrolled:!0})),o.a.createElement(ae.a,{eventKey:"filters",title:"Filters"},o.a.createElement(fe,{context:this.props.context,fileName:this.props.file.fileName})),o.a.createElement(ae.a,{eventKey:"indexes",title:"Arrange indexes"},o.a.createElement(Oe,{data:this.props.context.state.relatedArtwork[this.props.file.artworkFamily],file:this.props.file})),o.a.createElement(ae.a,{eventKey:"seeAlso",title:"See Alsos"},o.a.createElement(Ie,{context:this.props.context,directory:this.props.context.state.fileData.files[this.props.file.fileName].seeAlso,initialData:this.props.context.state.artworkInfoData,parent:this.props.file})))),o.a.createElement(Q,{showModal:this.state.showModal,message:this.state.modalMessage,onClose:function(){e.setState({showModal:!1})}}))}}]),a}(o.a.Component),Ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){n.setState({showModal:!1})},n.renderList=function(e){return e.map((function(e){return o.a.createElement(Ce,{key:"EditArtwork-".concat(e.fileName),context:n.props.context,file:e})}))},n.postAll=function(e){var t=n.props.context.state.fileData,a=t.column.fileIds.filter((function(a){return t.files[a].artworkFamily===e}));return new Promise((function(e,o){var l=a.length,r=0;a.forEach((function(a){n.setState({modalMessage:"sending to ".concat(n.props.familyName)});var i=t.files[a];n.props.context.fileDataMethods.postArtworkInfo(i).then((function(t){r+=1;var a=Math.round(100*r/l);n.setState({progressBar:a},console.log(n.state)),r===l&&e("operation complete")})).catch((function(e){return o(e)}))}))}))},n.state={showModal:!1,modalMessage:null,progressBar:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"FamilyList--main"},o.a.createElement("div",{className:"FamilyList--familyName"},o.a.createElement("div",{className:"FamilyList--familyName__text"},"Family name: ",this.props.familyName?this.props.familyName:"none")),this.renderList(this.props.files,this.props),o.a.createElement(Q,{showModal:this.state.showModal,message:this.state.modalMessage,onClose:function(){e.setState({showModal:!1})}},this.state.progressBar?o.a.createElement(ee.a,{now:this.state.progressBar}):null))}}]),a}(o.a.Component),Fe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).filesData=function(){return Object.keys(e.props.data.files).map((function(t){return e.props.data.files[t]}))},e.sortByFamily=function(){var t,a={};return e.filesData().forEach((function(e){if(!e.artworkFamily)return a.none||(a.none=[]),a.none=[].concat(Object(h.a)(a.none),[e]);a[e.artworkFamily]||(a[e.artworkFamily]=[]),a[e.artworkFamily]=[].concat(Object(h.a)(a[e.artworkFamily]),[e])})),t=Object.keys(a),{fileByFamily:a,familyNames:t}},e.renderNames=function(t){if(t){var a=e.sortByFamily();return e.sortByFamily().familyNames.map((function(t){return o.a.createElement(Ae,{key:"familyList-".concat(t),familyName:t,context:e.context,files:a.fileByFamily[t]})}))}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(Z.Consumer,null,(function(){return o.a.createElement(n.Fragment,{key:"main_container"},e.renderNames(e.props.data.files))}))}}]),a}(o.a.Component);Fe.contextType=Z;var Me=function(e){var t=e.context.state.familySetupData.artworkFamily;return e.context.state.artworkFamilyList.includes(t)?o.a.createElement("div",null,o.a.createElement("span",null,"Update family setup:"),o.a.createElement(X.a,{variant:"primary",size:"sm",onClick:function(){return e.submitAction()}},"SUBMIT")):t?o.a.createElement("div",null,o.a.createElement("span",null,"record new family setup:"),o.a.createElement(X.a,{variant:"success",size:"sm",onClick:function(){return e.submitAction()}},"SUBMIT")):o.a.createElement("div",null,o.a.createElement("span",null,"Add new Artwork Family name to continue."))},Te=function(e){return o.a.createElement(X.a,{onClick:function(){O.a.get("/api/artworkInfo").then((function(e){var t=Object.keys(e.data),a=0,n=t.length;console.log("allFams"),console.log(e.data),console.log("allFamNames"),console.log(t),console.log("updateLength"),console.log(n),e.data.forEach((function(e){var t=e,o=e.fileName,l=o.slice(0,o.indexOf(".")),r=o.slice(o.indexOf("."),o.length);t.thumbnailPath="uploads/thumbnails/".concat(l,"-thumbnail").concat(r),t.mobilePath="uploads/mobile/".concat(l,"-mob").concat(r),t.desktopPath="uploads/desktop/".concat(l,"-desktop").concat(r),console.log(t),console.log("********************************************"),O.a.put("/api/artworkInfo/update/".concat(e.fileName),t).then((function(e){console.log(e),a+=1,console.log("".concat(a," / ").concat(n)),a===n&&console.log("files updated")}))}))}))}},"Update all Artworks")},_e=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).modalInvoke=function(e,t){var a=Object(p.a)({},n.state);a=Object(p.a)(Object(p.a)({},a),{},{showModal:!0,modalMessage:"...loading..."}),e&&e.requireActionConfirm?a.confirm=!0:a.confirm=!1,n.setState(a,(function(){e&&e.requireActionConfirm?n.setState({confirmedAction:e.confirmedAction,modalMessage:e.modalMessage}):t.then((function(e){n.setState({modalMessage:e.modalMessage})})).catch((function(e){n.setState({modalMessage:e.modalMessage})}))}))},n.submitButtons=function(){var e=n.context.state.familySetupData.artworkFamily,t=n.context.state.artworkFamilyList;return o.a.createElement(Me,{context:n.context,submitAction:function(){var a=n.context.verify();if(!a.verified){return function(){n.setState({showModal:!0,modalMessage:a.message})}}if(t.includes(e)){return function(){n.setState({showModal:!0,modalMessage:"...loading..."},(function(){n.context.familySetupMethods.updateFamilySetup(n.context.state.familySetupData.artworkFamily).then((function(e){n.setState({modalMessage:e})})).catch((function(e){n.setState({modalMessage:e})}))}))}}return function(){n.setState({showModal:!0,modalMessage:"...loading..."},(function(){n.context.familySetupMethods.createFamilySetup().then((function(e){n.setState({modalMessage:e})})).catch((function(e){n.setState({modalMessage:e})}))}))}}()})},n.state={submitButtons:null,confirmedAction:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({submitButtons:this.submitButtons()})}},{key:"render",value:function(){var e=this;return o.a.createElement(Z.Consumer,null,(function(){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{defaultActiveKey:"upload",transition:!1,id:"noanim-tab-example"},o.a.createElement(ae.a,{eventKey:"upload",title:"Upload new files"},o.a.createElement("div",{className:"FileUpload-container"},o.a.createElement("div",{className:"imageInfo--box"},o.a.createElement("div",null,o.a.createElement("p",null,"Upload file(-s):"),o.a.createElement("input",{id:"uploadFileInput",type:"file",multiple:!0,onChange:function(t){var a=t;e.context.addFileToState(a).then((function(t){return e.setState({modalMessage:t})})).catch((function(t){e.setState({modalMessage:t})})),e.setState({showModal:!0,modalMessage:"uploading File(-s)"},(function(){}))}}),o.a.createElement("p",{className:"subtitle"},'The name of uploaded file cannot contain spaces or any special characters except for "-"'))),o.a.createElement(Fe,{data:e.context.state.fileData}))),o.a.createElement(ae.a,{eventKey:"create_family",title:"Create a new Family"},o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{eventKey:"create_family",transition:!1,title:"Create a new Family"},o.a.createElement(ae.a,{eventKey:"editFamilyInfo",title:"Family Basics"},o.a.createElement("div",{className:"create-createFamily"},o.a.createElement("div",{style:{backgroundColor:"#e4e4e4",padding:"7px",width:"100%"}},e.submitButtons()),o.a.createElement(se,{addNew:!0,router:"/api/familySetup/create",stateKey:"artworkFamilyList",requestKey:"artworkFamily",addNewTitle:"Add new Artwork Family name"}),o.a.createElement(de,{context:e.context}))),o.a.createElement(ae.a,{eventKey:"filters",title:"Filters"},o.a.createElement(fe,{context:e.context,modalInvoke:e.modalInvoke}))))),o.a.createElement(ae.a,{eventKey:"new_theme",title:"Create data filters"},o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,null,o.a.createElement(ae.a,{eventKey:"new_theme",title:"New Themes"},o.a.createElement(me,{context:e.context,dataArray:e.context.state.themesData,onChange:e.context.familySetupMethods.onChange,modalInvoke:e.modalInvoke,addNew:!0})),o.a.createElement(ae.a,{eventKey:"new_category",title:"New Categories"},o.a.createElement(ne,{context:e.context,modalInvoke:e.modalInvoke,addNew:!0}))))),o.a.createElement(ae.a,{eventKey:"record_state",title:"Write state"},o.a.createElement("button",{onClick:function(){e.context.staticState()}},"WRITE NEW STAIC STATE"),o.a.createElement(Te,null)))),o.a.createElement(Q,{showModal:e.state.showModal||e.context.state.showModal,message:e.state.modalMessage,onClose:function(){e.setState({showModal:!1})},confirm:e.state.confirm||!1,confirmedAction:function(){e.state.confirmedAction().then((function(t){e.setState({confirm:t.confirm,modalMessage:t.modalMessage})})).catch((function(t){e.setState({confirm:t.confirm,modalMessage:t.modalMessage})}))}},e.state.progress?o.a.createElement(ee.a,{now:e.state.progress?e.state.progress:100}):null))}))}}]),a}(n.Component);_e.contextType=Z;var Be=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){n.setState({showModal:!1,modalConfirm:!0})},n.verify=function(){var e=n.props.context.verify();return console.log("result"),console.log(e),!!e.verified||(n.setState(Object(p.a)({},e)),!1)},n.onModalClick=function(e){if(n.verify()){var t=Object(p.a)({},n.state);t.fileToDelete=n.props.context.state.artworkInfoData[e],t.showModal=!0,t.modalMessage=o.a.createElement("span",null,"Delete ",o.a.createElement("em",null,e),"?"),n.setState(t)}else n.setState({modalConfirm:!1})},n.EditDetail=function(e){if(e)return o.a.createElement(he,{file:e,key:"".concat(e.fileName,"-detail")},o.a.createElement(Se,{file:e,context:n.props.context,onModalClose:n.onClose,onModalClick:n.onModalClick}))},n.filterByFamily=function(e){var t={},a=n.state.allFiles;Object.keys(n.state.allFiles).forEach((function(n){if(a[n].artworkFamily===e){var o=a[n];t=Object(p.a)(Object(p.a)({},t),{},Object(b.a)({},n,o))}})),n.setState({fileList:t},(function(){console.log("filter done"),console.log(n.state)}))},n.reloadAll=function(){n.setState({fileList:n.state.allFiles})},n.deletePromise=function(e,t){return new Promise((function(a,o){n.props.context.fileDataMethods.deleteDBrecord(e,t).then((function(e){a({modalMessage:e,modalConfirm:!1})})).catch((function(e){o({modalMessage:e,modalConfirm:!1})}))}))},n.state={showModal:!1,modalMessage:null,modalConfirm:!0,fileList:n.props.state.artworkInfoData,allFiles:n.props.state.artworkInfoData},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({fileList:this.props.state.artworkInfoData})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"familyContainer",className:"EditDetailContainer"},o.a.createElement("div",{className:"familyPicker"},o.a.createElement("button",{className:"btn-sm btn-primary familyPicker-reload",onClick:this.reloadAll},"reload file list"),o.a.createElement(De,{title:"filter by family"},o.a.createElement(Ee,{context:this.props.context,onChange:this.filterByFamily,uncontrolled:!0,radio:!0}))),o.a.createElement("div",{className:"grid-wrapper"},Object.keys(this.state.fileList).map((function(t){return e.EditDetail(e.props.state.artworkInfoData[t])}))),this.state.showModal?o.a.createElement(Q,{confirm:this.state.modalConfirm,showModal:this.state.showModal,onClose:this.onClose,confirmedAction:function(){return e.deletePromise(e.state.fileToDelete.fileName,e.state.fileToDelete.artworkFamily)}},o.a.createElement("div",null,o.a.createElement("p",null,this.state.modalMessage),this.state.fileToDelete?o.a.createElement(pe,{file:this.state.fileToDelete}):null)):null)}}]),a}(o.a.Component),Le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClose=function(){n.setState({showModal:!1})},n.verify=function(){var e=n.props.context.verify();return!!e.verified||(n.setState(Object(p.a)({},e)),!1)},n.state={showModal:!1,modalMessage:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"FileInfo-container"},o.a.createElement("div",{className:"FileInfo-preview"},o.a.createElement(he,{customClass:"serverFileUpdate-imageBox",file:this.props.file}),o.a.createElement("div",{className:"FamilyList--submit-delete-container"},o.a.createElement(X.a,{variant:"success",className:"custom-button",onClick:function(){e.verify()&&(e.setState({showModal:!0,modalMessage:"loading..."}),e.props.context.fileDataMethods.updateArtworkInfo(e.props.context.state.fileData.files[e.props.file.fileName]).then((function(t){e.setState({modalMessage:t})})).catch((function(t){e.setState({modalMessage:t})})))}},"Submit to server"),o.a.createElement(m.b,{to:"/admin/edit"},o.a.createElement(X.a,{variant:"danger",className:"custom-button",onClick:function(){return e.props.context.removeFile(e.props.file.fileName)}},"Cancel")),o.a.createElement(X.a,{variant:"primary",className:"custom-button",onClick:function(){return e.props.context.fileDataMethods.relateSeeAlso(e.props.file)}},"Check see also"),o.a.createElement(Q,{showModal:this.state.showModal,message:this.state.modalMessage,onClose:this.onClose}))),o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{defaultActiveKey:"artworkInfo",transition:!1,id:"".concat(this.props.file.fileName,"-fileUpdate")},o.a.createElement(ae.a,{eventKey:"artworkInfo",title:"Edit Artwork Info"},o.a.createElement(ge,{file:this.props.file,fileName:this.props.file.fileName,onChange:this.props.context.fileDataMethods.onChange,state:this.props.context.state,context:this.props.context})),o.a.createElement(ae.a,{eventKey:"familyInfo",title:"Edit Artwork Family Info"},o.a.createElement(xe,{context:this.props.context,fileName:this.props.file.fileName})),o.a.createElement(ae.a,{eventKey:"filters",title:"Filters"},o.a.createElement(fe,{context:this.props.context,fileName:this.props.file.fileName})),o.a.createElement(ae.a,{eventKey:"indexes",title:"Arrange indexes"},o.a.createElement(Oe,{data:this.props.context.state.relatedArtwork[this.props.file.artworkFamily],file:this.props.file})),o.a.createElement(ae.a,{eventKey:"seeAlso",title:"See Alsos"},o.a.createElement(Ie,{context:this.props.context,directory:this.props.context.state.fileData.files[this.props.file.fileName].seeAlso,initialData:this.props.context.state.artworkInfoData,parent:this.props.file})))))}}]),a}(o.a.Component),Pe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).filesData=function(e){return Object.keys(e).map((function(t){return e[t]}))},n.sortByFamily=function(){var e,t={};return n.filesData(n.context.state.artworkInfoData).forEach((function(e){if(!e.artworkFamily)return t.none||(t.none=[]),t.none=[].concat(Object(h.a)(t.none),[e]);t[e.artworkFamily]||(t[e.artworkFamily]=[]),t[e.artworkFamily]=[].concat(Object(h.a)(t[e.artworkFamily]),[e])})),e=Object.keys(t),{fileByFamily:t,familyNames:e}},n.submitButtons=function(){var e=n.context.state.familySetupData.artworkFamily,t=n.context.state.artworkFamilyList;return o.a.createElement(Me,{context:n.context,submitAction:function(){var a=n.context.verify();if(!a.verified){return function(){n.setState({showModal:!0,modalMessage:a.message})}}if(t.includes(e)){return function(){n.setState({showModal:!0,modalMessage:"...loading..."},(function(){n.context.familySetupMethods.updateFamilySetup(n.context.state.familySetupData.artworkFamily).then((function(e){n.setState({modalMessage:e})})).catch((function(e){n.setState({modalMessage:e})}))}))}}return function(){n.setState({showModal:!0,modalMessage:"...loading..."},(function(){n.context.familySetupMethods.createFamilySetup().then((function(e){n.setState({modalMessage:e})})).catch((function(e){n.setState({modalMessage:e})}))}))}}()})},n.modalInvoke=function(e,t){var a=Object(p.a)({},n.state);a=Object(p.a)(Object(p.a)({},a),{},{showModal:!0,modalMessage:"...loading..."}),e&&e.requireActionConfirm?a.confirm=!0:a.confirm=!1,n.setState(a,(function(){e&&e.requireActionConfirm?n.setState({confirmedAction:e.confirmedAction,modalMessage:e.modalMessage}):e.confirmedAction.then((function(e){n.setState({modalMessage:e.modalMessage})})).catch((function(e){n.setState({modalMessage:e.modalMessage})}))}))},n.state={submitButtons:null,confirmedAction:null},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(Z.Consumer,null,(function(){return o.a.createElement(f.d,null,o.a.createElement(f.b,{exact:!0,path:"/admin/edit"},o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,{defaultActiveKey:"editArtwork",transition:!1,id:"edit-artwork-family"},o.a.createElement("div",{style:{backgroundColor:"#e4e4e4",padding:"7px"}},e.submitButtons(),o.a.createElement("div",null,"current Artwork Family:",o.a.createElement("strong",null,e.context.state.familySetupData.artworkFamily))),o.a.createElement(ae.a,{eventKey:"editArtwork",title:"Edit by Artwork"},o.a.createElement(Be,{context:e.context,state:e.context.state,familySetupMethods:e.context.familySetupMethods})),o.a.createElement(ae.a,{eventKey:"editFamily",title:"Edit Artwork Families"},e.submitButtons(),o.a.createElement(xe,{context:e.context}),o.a.createElement(fe,{context:e.context})),o.a.createElement(ae.a,{eventKey:"new_theme",title:"Delete data filters"},o.a.createElement("div",{className:"Tabs-container"},o.a.createElement(te.a,null,o.a.createElement(ae.a,{eventKey:"delete_theme",title:"Delete Themes"},o.a.createElement(me,{context:e.context,dataArray:e.context.state.themesData,onChange:e.context.familySetupMethods.onChange,modalInvoke:e.modalInvoke,allowDelete:!0})),o.a.createElement(ae.a,{eventKey:"delete_category",title:"Delete Categories"},o.a.createElement(ne,{context:e.context,modalInvoke:e.modalInvoke,allowDelete:!0}))))))),o.a.createElement(Q,{showModal:e.state.showModal||e.context.state.showModal,message:e.state.modalMessage,onClose:function(){e.setState({showModal:!1})},confirm:e.state.confirm||!1,confirmedAction:function(){e.state.confirmedAction().then((function(t){e.setState({confirm:t.confirm,modalMessage:t.modalMessage})})).catch((function(t){e.setState({confirm:t.confirm,modalMessage:t.modalMessage})}))}})),o.a.createElement(f.b,{path:"/admin/edit/:fileName",render:function(t){return o.a.createElement(Le,{context:e.context,familyName:e.context.state.artworkInfoData[t.match.params.fileName].artworkFamily,file:e.context.state.fileData.files[t.match.params.fileName],files:e.sortByFamily().fileByFamily[e.context.state.artworkInfoData[t.match.params.fileName].artworkFamily],relatedArtwork:e.context.state.relatedArtwork[e.context.state.artworkInfoData[t.match.params.fileName].artworkFamily],removeFile:e.context.fileDataMethods.removeFile})}}))}))}}]),a}(n.Component);Pe.contextType=Z;var qe=function(e){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(X.a,{variant:"danger",onClick:function(){O.a.get("/api/artworkInfo").then((function(e){console.log(e.data);var t=e.data.map((function(e){return e.fileName})),a=new Set(t);console.log(a),a.forEach((function(e){O.a.delete("/api/artworkInfo/delete/".concat(e)).then((function(e){return console.log(e)}))}))})).catch((function(e){return console.log(e)}))}},"Delete all DB records"))},Ke=(a(234),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return console.log("auth in Admin"),console.log(g),o.a.createElement(m.a,null,o.a.createElement($,null,o.a.createElement("div",{className:"admin-container"},o.a.createElement("nav",{className:"admin-nav"},o.a.createElement("div",{className:"admin-level"},g.guest?"Guest":"ADMIN"),o.a.createElement("ul",{className:"admin-nav-list"},o.a.createElement("li",null,o.a.createElement(m.b,{to:"/admin/create"},o.a.createElement(X.a,null,"Create"))),o.a.createElement("li",null,o.a.createElement(m.b,{to:"/admin/edit"},o.a.createElement(X.a,null,"Edit"))),g.guest?null:o.a.createElement("li",null,o.a.createElement(m.b,{to:"/admin/delete"},o.a.createElement(X.a,{variant:"danger"},"Delete"))),o.a.createElement("li",null,o.a.createElement(X.a,{variant:"success",onClick:function(){e.props.history.push("/")}},"Home")),o.a.createElement("li",null,o.a.createElement(X.a,{onClick:function(){g.logout((function(){e.props.history.push("/admin/login")}))}},"Log OUT")))),o.a.createElement("div",{className:"admin-content"},o.a.createElement(y,{path:"/admin/create",component:_e,guest:g.guest}),o.a.createElement(y,{path:"/admin/edit",component:Pe,guest:g.guest}),o.a.createElement(y,{path:"/admin/delete",component:qe,guest:g.guest})))))}}]),a}(o.a.Component)),He=function(e){var t=null,a=null;return o.a.createElement("div",{className:"Login-container"},o.a.createElement("form",{id:"logIn",className:"Login-form"},o.a.createElement("label",{htmlFor:"uname"},"Username"),o.a.createElement("input",{className:"Login-input",onSubmit:function(e){return e.preventDefault()},style:{backgroundColor:t},type:"text",placeholder:"Enter Username",name:"uname",id:"uname",required:!0}),o.a.createElement("label",{htmlFor:"psw"},"Password"),o.a.createElement("input",{className:"Login-input",onSubmit:function(e){return e.preventDefault()},style:{backgroundColor:a},type:"password",placeholder:"Enter Password",name:"psw",id:"psw",required:!0}),o.a.createElement(X.a,{className:"Login-button",form:"logIn",type:"submit",value:"submit",onClick:function(n){n.preventDefault();var o=document.getElementById("uname").value,l=document.getElementById("psw").value;console.log(o,l),O.a.get("/api/users/".concat(o)).then((function(n){n.data.password&&n.data.password===l?"guest"===n.data.username?(console.log("LOGGED IN AS GUEST"),g.login((function(){return e.history.push("/admin/create")}),{guest:!0})):(console.log("LOGGED IN AS ------------------ADMIN"),g.login((function(){return e.history.push("/admin/create")}),{guest:!1})):(n.data.username||(console.log("res.data.username !== username"),t="#ffd4d4"),a="#ffd4d4",document.getElementById("uname").value="",document.getElementById("psw").value="")}))}},"Log In")))},We=(a(235),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement("div",{className:"app-container"},o.a.createElement(f.d,null,o.a.createElement(f.b,{path:"/",exact:!0,component:J}),o.a.createElement(f.b,{path:"/admin/login",exact:!0,component:He}),o.a.createElement(y,{path:"/admin",component:Ke}),o.a.createElement(y,{path:"/admin/create",component:_e}),o.a.createElement(y,{path:"/admin/edit",component:Pe}),o.a.createElement(y,{path:"/admin/delete",component:qe}),o.a.createElement(f.b,{to:"/*",exact:!0,component:J}))))}}]),a}(n.Component));r.a.render(o.a.createElement(We,null),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.f682ea46.chunk.js.map